<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curso Interativo: Integra√ß√£o FiveM NUI com QBcore</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <!-- 
    Chosen Palette: "TechDrift Redux" - An enhanced, modern palette building on the previous one. It retains the light gray background and dark text for readability but introduces a more vibrant and consistent blue accent (#3b82f6) for interactive elements, with subtle gradients and shadows for depth. The typography uses 'Inter' for body and 'Fira Code' for code for clear distinction.
    Application Structure Plan: Still a two-column layout, but with improved visual hierarchy, more generous spacing, and a cleaner sidebar. The mobile view now prioritizes a clear "Table of Contents" toggle.
    Visualization & Content Choices: 
    - Code examples: Enhanced styling to look more like a professional editor, with improved color contrast and subtle shadows.
    - File structure diagram: Retains visual clarity with improved box models and spacing.
    - Interactive communication flow diagram: More distinct visual separation for components, with clearer arrow indicators and an animated tooltip for engagement.
    - Buttons: More prominent and visually appealing with clear hover/active states.
    - Section headers: Larger, bolder, with a subtle underline for better hierarchy.
    - General improvements: Increased padding, refined border-radii, and consistent shadows for a polished, modern feel.
    CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
    <style>
        /* General Body Styles */
        body { 
            font-family: 'Inter', sans-serif; 
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Code Specific Font */
        code, .font-mono { 
            font-family: 'Fira Code', monospace; 
        }

        /* Sidebar Link Active State - Enhanced */
        .sidebar-link.active {
            color: #2563eb; /* Deeper blue for active link */
            font-weight: 600; /* Bolder */
            border-left-color: #2563eb; /* Matching border color */
            background-color: #e0f2fe; /* Light blue background for active */
            padding-left: 1.5rem; /* Increased padding for emphasis */
            border-radius: 0 0.5rem 0.5rem 0; /* Rounded on the right */
            transition: all 0.2s ease-in-out; /* Smooth transition */
        }
        .sidebar-link {
            transition: all 0.2s ease-in-out; /* Smooth transition for all links */
            border-left: 2px solid transparent; /* Default transparent border */
            padding-left: 1rem; /* Default padding */
        }
        .sidebar-link:hover:not(.active) {
            background-color: #f3f4f6; /* Light gray on hover */
            border-left-color: #93c5fd; /* Lighter blue border on hover */
        }

        /* Code Block Styling - Enhanced */
        .code-block {
            position: relative;
            background-color: #2c3e50; /* Darker blue-gray for code */
            border-radius: 0.75rem; /* More rounded corners */
            padding: 1.5rem; /* More padding */
            padding-top: 3rem; /* Adjusted for buttons */
            overflow-x: auto;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2); /* Deeper shadow */
            margin-top: 1.5rem; /* More separation */
            border: 1px solid rgba(60, 80, 100, 0.7); /* Subtle border */
        }
        .code-block pre {
            margin: 0;
            padding: 0;
            color: #ecf0f1; /* Lighter text for code */
            font-size: 0.95rem; /* Slightly larger font */
            line-height: 1.6; /* Improved line height */
        }
        .code-block button {
            transition: background-color 0.2s ease, transform 0.1s ease;
        }
        .code-block button:hover {
            transform: translateY(-2px);
        }
        .code-block button:active {
            transform: translateY(0);
        }

        /* Explanation Area - Improved */
        .explanation-area {
            background-color: #eff6ff; /* Very light blue */
            border-color: #93c5fd; /* Soft blue border */
            border-radius: 0.75rem;
            padding: 1rem;
            margin-top: 1.5rem;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.06); /* Inner shadow */
        }
        .explanation-area p {
            color: #1f2937; /* Dark text for readability */
        }

        /* Interactive Flow Diagram - Refined */
        .flow-item {
            cursor: help; /* Indicates interactivity */
            transition: all 0.3s ease-in-out;
            border: 2px solid #60a5fa; /* Blue border */
            background-color: #dbeafe; /* Lighter blue background */
            color: #1e3a8a; /* Darker blue text */
            font-weight: 600;
        }
        .flow-item:hover {
            transform: translateY(-5px) scale(1.03); /* Lift and grow on hover */
            box-shadow: 0 8px 16px rgba(59, 130, 246, 0.3); /* Blue shadow */
        }
        .flow-arrow {
            transition: transform 0.3s ease-in-out;
        }
        .flow-item:hover + .flex-col > .flow-arrow,
        .flow-arrow:hover {
            transform: scaleX(1.1); /* Stretch arrow on hover */
            color: #2563eb; /* Darker blue for arrow */
        }
        #flow-info-box {
            background-color: #e0f2fe; /* Light blue background */
            border: 1px solid #93c5fd; /* Soft blue border */
            border-radius: 0.75rem;
            font-style: italic;
            color: #3b82f6;
            min-height: 60px; /* Increased min-height for better visibility */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem;
        }

        /* General Section & Article Styling */
        section {
            background-color: #fdfdfd; /* Slightly off-white */
            border-radius: 1rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08); /* Soft shadow */
            padding: 2.5rem; /* More padding for sections */
            margin-bottom: 2rem; /* More space between sections */
            border: 1px solid #e5e7eb; /* Light border */
        }
        h2 {
            border-bottom: 3px solid #d1d5db; /* Thicker, lighter border for H2 */
            padding-bottom: 0.75rem;
            margin-bottom: 1.5rem;
            color: #1f2937; /* Darker heading text */
        }
        article {
            background-color: #ffffff; /* Pure white for articles */
            border-radius: 0.75rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); /* Lighter shadow for articles */
            padding: 1.75rem; /* More padding for articles */
            margin-bottom: 1.5rem;
            border: 1px solid #f3f4f6; /* Very light border */
        }
        h3 {
            color: #2d3748; /* Darker heading text */
            margin-bottom: 1rem;
        }
        p, ul, ol {
            line-height: 1.7; /* Improved line spacing */
            color: #374151; /* Darker gray for body text */
        }
        a {
            color: #3b82f6; /* Consistent blue for links */
            text-decoration: none;
            transition: color 0.2s ease;
        }
        a:hover {
            text-decoration: underline;
            color: #2563eb; /* Darker blue on hover */
        }
        ul.list-disc, ol.list-decimal {
            margin-left: 1.5rem; /* Indent lists properly */
        }
        ul.list-circle {
            list-style-type: circle;
        }
        
        /* Mobile Specific Styles */
        @media (max-width: 767px) {
            #mobile-nav {
                width: 75%; /* Make mobile nav take more space */
                box-shadow: 5px 0 15px rgba(0, 0, 0, 0.2);
            }
            .sidebar-link.active {
                padding-left: 1.5rem; /* Keep consistent padding */
            }
        }
        
        /* Loading Spinner */
        .loading-spinner {
            display: flex;
            align-items: center;
            justify-content: center;
            color: #3b82f6; /* Spinner color */
        }
        .loading-spinner div {
            border-top-color: #3b82f6;
        }

        /* Challenge/Hint Area Styling */
        #hint-area {
            background-color: #e6fffa; /* Light teal for hints */
            border-color: #81e6d9;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }
        #hint-area p {
            color: #00796b; /* Dark teal text */
        }
        #hint-area .loading-spinner div {
            border-top-color: #00796b;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="flex flex-col md:flex-row min-h-screen">
        <!-- Mobile Header -->
        <header class="md:hidden sticky top-0 bg-white/90 backdrop-blur-md z-20 border-b border-gray-200 shadow-sm">
            <div class="container mx-auto px-4 py-3 flex justify-between items-center">
                <h1 class="text-xl font-bold text-blue-600">Curso FiveM NUI</h1>
                <button id="mobileMenuButton" class="p-2 rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                    <svg class="h-6 w-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                    </svg>
                </button>
            </div>
        </header>

        <!-- Sidebar Navigation -->
        <aside id="sidebar" class="hidden md:block fixed md:sticky top-0 h-screen w-72 bg-white border-r border-gray-200 overflow-y-auto shrink-0 z-10 p-6 shadow-lg md:shadow-none transition-transform -translate-x-full md:translate-x-0">
            <h1 class="text-2xl font-bold text-blue-700 mb-8 mt-4">Curso FiveM NUI</h1>
            <nav id="desktop-nav" class="space-y-2">
                <!-- Navigation links will be injected by JS -->
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-6 md:p-10 lg:p-12 bg-gradient-to-br from-gray-50 to-blue-50">
            <div class="max-w-4xl mx-auto">
                
                <section id="s1" class="mb-16 scroll-mt-24">
                    <h2 class="text-4xl font-extrabold border-b border-blue-200 pb-4 mb-8 text-blue-800">1. Introdu√ß√£o</h2>
                    <p class="text-lg text-gray-700 leading-relaxed mb-8">Ol√°, futuro(a) desenvolvedor(a) de FiveM! Bem-vindo(a) ao seu guia pr√°tico para desvendar a arte de conectar o front-end (a parte que voc√™ v√™) com o back-end (a l√≥gica por tr√°s dos panos) no universo do FiveM, utilizando o poderoso framework QBcore e as interfaces web chamadas NUI. Este material foi feito sob medida para voc√™, que est√° dando os primeiros passos e quer aprender de forma clara, did√°tica e divertida!</p>
                    
                    <article id="s1_1" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">1.1 Objetivos do Curso</h3>
                        <p class="mb-4 text-gray-600">Ao final deste curso, voc√™ n√£o apenas entender√° os conceitos, mas ter√° as m√£os na massa e as habilidades para:</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Entender a Conversa:</strong> Compreender como o lado vis√≠vel (sua interface web NUI) e o lado da l√≥gica (seus scripts Lua) "conversam" entre si no FiveM.</li>
                            <li><strong>Organizar seus Projetos:</strong> Aprender a organizar seus arquivos e recursos de forma simples e eficaz, preparando o terreno para scripts futuros.</li>
                            <li><strong>Criar Coisas que Funcionam:</strong> Desenvolver seus primeiros scripts que se comunicam em tempo real, fazendo a m√°gica acontecer entre o que o jogador v√™ e o que o servidor processa.</li>
                            <li><strong>Montar Telas Bonitas:</strong> Usar HTML, CSS e JavaScript para criar interfaces de usu√°rio intuitivas e com um visual que voc√™ mesmo(a) vai gostar!</li>
                            <li><strong>Aprender Boas Maneiras de Programar:</strong> Pegar algumas dicas essenciais para escrever c√≥digos limpos, seguros e que funcionam sem dor de cabe√ßa.</li>
                        </ul>
                    </article>

                    <article id="s1_2" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">1.2 P√∫blico-Alvo</h3>
                        <p class="mb-2 text-gray-600">Este curso foi carinhosamente preparado para:</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                           <li><strong>Iniciantes na Programa√ß√£o:</strong> Se voc√™ est√° come√ßando a programar ou tem apenas uma no√ß√£o b√°sica (tipo, sabe o que √© uma vari√°vel ou um `if`), este √© o seu lugar!</li>
                           <li><strong>Curiosos do FiveM:</strong> Se voc√™ joga FiveM e sempre se perguntou como as coisas funcionam por tr√°s dos menus e sistemas, prepare-se para descobrir!</li>
                           <li><strong>Quem Conhece um Pouco de Web:</strong> Se voc√™ j√° brincou com HTML, CSS e JavaScript, vai se sentir em casa. Se n√£o brincou, n√£o se preocupe, vamos explicar o essencial!</li>
                           <li><strong>Aprendizes Pr√°ticos:</strong> Se voc√™ aprende fazendo, vai amar os exemplos diretos e os desafios para colocar a m√£o na massa.</li>
                        </ul>
                    </article>

                    <article id="s1_3" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">1.3 Ferramentas Necess√°rias</h3>
                        <p class="mb-4 text-gray-600">Para embarcar nessa jornada, voc√™ precisar√° de algumas ferramentas. √â como montar a sua bancada de trabalho de desenvolvedor!</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                           <li><strong>FXServer:</strong> Pense nele como o "cora√ß√£o" do seu servidor FiveM. √â onde o jogo roda. Voc√™ vai precisar de um funcionando para testar seus scripts. N√£o se preocupe, vamos te ajudar a configurar!</li>
                           <li><strong>Editor de C√≥digo:</strong> √â o seu "caderno" e "caneta" superpoderosos para escrever c√≥digo. Eu super recomendo o **VSCode** (Visual Studio Code). Ele √© gratuito, leve e tem muitos recursos que facilitam a vida, como cores para o c√≥digo (destaque de sintaxe) e sugest√µes autom√°ticas.</li>
                           <li><strong>Navegador Web:</strong> Voc√™ j√° usa um! Chrome, Firefox ou Edge. Eles ser√£o importantes para ver e "consertar" (depurar) a parte visual da sua interface NUI.</li>
                           <li><strong>QBcore Framework:</strong> √â um "kit de ferramentas" super popular para criar servidores de Roleplay no FiveM. Ele j√° vem com um monte de coisas prontas (invent√°rio, dinheiro, etc.), o que nos ajuda a focar na integra√ß√£o.</li>
                        </ul>
                    </article>
                </section>

                <section id="s2" class="mb-16 scroll-mt-24">
                    <h2 class="text-4xl font-extrabold border-b border-blue-200 pb-4 mb-8 text-blue-800">2. Conceitos B√°sicos: O Alicerce do seu Conhecimento</h2>
                    <p class="text-lg text-gray-700 leading-relaxed mb-8">Antes de mergulhar no c√≥digo, vamos entender alguns pilares importantes. Imagine que estamos construindo uma casa: precisamos saber onde colocar o alicerce e quais materiais usar. Aqui, o alicerce s√£o os recursos, a NUI e a forma como tudo se comunica!</p>

                    <article id="s2_1" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">2.1 Estrutura de Recursos no FiveM: Organizando suas Ideias</h3>
                        <p class="mb-4 text-gray-600">No FiveM, tudo o que adiciona uma funcionalidade ao seu servidor √© chamado de **Recurso** (ou "Resource" em ingl√™s). Pense em um recurso como um "m√≥dulo" ou uma "pasta organizada" que cont√©m todos os arquivos necess√°rios para uma fun√ß√£o espec√≠fica. Por exemplo, voc√™ pode ter um recurso para o sistema de invent√°rio, outro para uma loja de carros, e o nosso ser√° para a integra√ß√£o NUI!</p>
                        <p class="mb-4 text-gray-600">Cada recurso vive em sua pr√≥pria pasta, que fica dentro da pasta `resources` do seu FXServer. √â como ter gavetas separadas para cada tipo de ferramenta na sua caixa.</p>
                        <p class="mb-4 text-gray-600">O grande chefe de cada recurso √© um arquivo chamado **`fxmanifest.lua`**. Esse √© o "cart√£o de visitas" do seu recurso. Ele diz ao FiveM:</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li>Qual √© o nome do seu recurso.</li>
                            <li>Quem o criou.</li>
                            <li>E, o mais importante, **quais arquivos ele precisa carregar** para funcionar, e se esses arquivos s√£o para o lado do jogador (cliente) ou para o lado do servidor.</li>
                        </ul>
                        <p class="text-gray-600">Sem um `fxmanifest.lua` bem feito, seu recurso simplesmente n√£o vai funcionar! √â como tentar usar uma ferramenta sem saber o manual de instru√ß√µes.</p>
                    </article>

                    <article id="s2_2" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">2.2 O que √© NUI? A Interface que o Jogador V√™!</h3>
                        <p class="mb-4 text-gray-600">**NUI (Native UI)** √© um recurso super bacana do FiveM que nos permite criar telas e menus personalizados no jogo usando o que j√° conhecemos do desenvolvimento web: **HTML**, **CSS** e **JavaScript**! Sim, √© isso mesmo! Aquelas tecnologias que voc√™ usa para fazer sites, agora no FiveM!</p>
                        <p class="mb-4 text-gray-600">Imagine que o FiveM tem um "mini-navegador" escondido dentro dele. A NUI usa esse mini-navegador para mostrar suas p√°ginas HTML. Isso significa que voc√™ pode criar:</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li>Menus bonitos para lojas, bancos, empregos.</li>
                            <li>Telas de HUD (aqueles indicadores de vida, colete, etc.) totalmente personalizadas.</li>
                            <li>Sistemas de notifica√ß√£o (aqueles avisinhos que aparecem na tela).</li>
                            <li>E muito mais, com total liberdade de design!</li>
                        </ul>
                        <p class="mb-4 text-gray-600">A grande vantagem da NUI √© que se voc√™ j√° tem um pouquinho de HTML, CSS e JavaScript, voc√™ j√° est√° no caminho certo para criar coisas visuais incr√≠veis no FiveM, sem ter que aprender uma linguagem de interface totalmente nova.</p>
                    </article>

                    <article id="s2_3" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">2.3 A Grande Conversa: Client ‚Üî Server ‚Üî NUI</h3>
                        <p class="mb-4 text-gray-600">A m√°gica acontece quando as diferentes partes do seu script "conversam". No FiveM, temos tr√™s "personagens" principais que trocam mensagens:</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Cliente (Client):</strong> √â o que roda no computador de cada jogador. Ele cuida do que o jogador v√™ e faz individualmente.</li>
                            <li><strong>Servidor (Server):</strong> √â o que roda no computador principal do jogo. Ele cuida da l√≥gica geral, do banco de dados e de tudo o que afeta *todos* os jogadores ou que precisa ser seguro.</li>
                            <li><strong>NUI (HTML/JS):</strong> √â a sua interface web que o jogador v√™ na tela.</li>
                        </ul>
                        <p class="mb-4 text-gray-600">A comunica√ß√£o entre Cliente e Servidor √© feita atrav√©s de **Eventos**. E a comunica√ß√£o entre Cliente e NUI √© feita de um jeito especial. Entenda o fluxo principal abaixo e passe o mouse para ver os detalhes:</p>
                        
                        <h4 class="text-xl font-bold mb-4 mt-8 text-gray-800">Tipos de Eventos Principais:</h4>
                        <div class="mb-6 p-5 bg-blue-50 rounded-lg text-gray-700 border border-blue-200 shadow-sm">
                            <p class="font-bold mb-2 text-blue-700">Cliente ‚û° Servidor (Client-to-Server):</p>
                            <p class="mb-3">Um jogador faz algo (ex: compra um item), e o script do cliente precisa avisar o servidor sobre isso. O servidor ent√£o processa a compra de forma segura.</p>
                            <p class="font-mono text-blue-600 bg-blue-100 p-2 rounded-md mb-2">No script do Cliente (Lua): `TriggerServerEvent('nomeDoEventoNoServidor', dados)`</p>
                            <p class="font-mono text-green-600 bg-green-100 p-2 rounded-md mb-2">No script do Servidor (Lua): Primeiro, registre o evento: `RegisterNetEvent('nomeDoEventoNoServidor')`</p>
                            <p class="font-mono text-green-600 bg-green-100 p-2 rounded-md">No script do Servidor (Lua): Depois, escute-o: `AddEventHandler('nomeDoEventoNoServidor', function(dados) ... end)`</p>
                        </div>
                        <div class="mb-6 p-5 bg-green-50 rounded-lg text-gray-700 border border-green-200 shadow-sm">
                            <p class="font-bold mb-2 text-green-700">Servidor ‚û° Cliente (Server-to-Client):</p>
                            <p class="mb-3">O servidor precisa avisar um ou mais jogadores sobre algo (ex: "Voc√™ recebeu um item!", "Evento come√ßou!").</p>
                            <p class="font-mono text-green-600 bg-green-100 p-2 rounded-md mb-2">No script do Servidor (Lua): `TriggerClientEvent('nomeDoEventoNoCliente', idDoJogador, dados)`</p>
                            <p class="font-mono text-blue-600 bg-blue-100 p-2 rounded-md mb-2">No script do Cliente (Lua): Primeiro, registre o evento: `RegisterNetEvent('nomeDoEventoNoCliente')`</p>
                            <p class="font-mono text-blue-600 bg-blue-100 p-2 rounded-md">No script do Cliente (Lua): Depois, escute-o: `AddEventHandler('nomeDoEventoNoCliente', function(dados) ... end)`</p>
                        </div>
                        <div class="mb-6 p-5 bg-yellow-50 rounded-lg text-gray-700 border border-yellow-200 shadow-sm">
                            <p class="font-bold mb-2 text-yellow-700">Cliente ‚Üî NUI (Client ‚Üî Interface Web):</p>
                            <p class="mb-3">Essa √© a "ponte" entre o seu c√≥digo Lua no computador do jogador e a telinha HTML/CSS/JS que ele v√™. A NUI pode mostrar informa√ß√µes do jogo e tamb√©m enviar cliques e dados para o Lua processar.</p>
                            <div class="p-4 bg-white rounded-lg border border-gray-200 shadow-inner">
                                <div class="flex flex-col sm:flex-row justify-between items-center space-y-6 sm:space-y-0 sm:space-x-8">
                                    <div class="flow-item text-center p-4 bg-blue-200 rounded-xl w-full sm:w-auto shadow-md" data-info="O script Lua no lado do jogador (client.lua) precisa mostrar ou atualizar algo na tela da NUI.">
                                        <span class="font-bold text-blue-800">LUA (Client)</span>
                                    </div>
                                    <div class="flex flex-col items-center flex-shrink-0">
                                        <span class="flow-arrow text-blue-600 font-mono text-lg transition-transform duration-300" data-info="Usa a fun√ß√£o SendNUIMessage({ 'a√ß√£o': 'mostrar', 'dados': 'info' }) para enviar uma mensagem para o JavaScript da NUI.">‚Üí SendNUIMessage ‚Üí</span>
                                        <span class="flow-arrow text-green-600 font-mono text-lg transition-transform duration-300" data-info="O JavaScript da NUI (script.js) usa fetch() para enviar dados para um 'callback' registrado no client.lua.">‚Üê Callback (fetch) ‚Üê</span>
                                    </div>
                                    <div class="flow-item text-center p-4 bg-green-200 rounded-xl w-full sm:w-auto shadow-md" data-info="A interface web (HTML/CSS/JS) recebe a mensagem do Lua e pode tamb√©m enviar dados de volta.">
                                        <span class="font-bold text-green-800">NUI (HTML/JS)</span>
                                    </div>
                                </div>
                                <div id="flow-info-box" class="mt-6 p-4 bg-white rounded-xl text-center text-base text-gray-600 min-h-[70px] flex items-center justify-center shadow-inner border border-gray-100">Passe o mouse sobre um elemento do fluxo para saber mais!</div>
                            </div>
                            <p class="text-sm mt-4 text-gray-600">Ex: NUI exibe o dinheiro do jogador (Lua para JS). O jogador clica em um bot√£o na NUI (JS para Lua).</p>
                        </div>
                        <p class="mb-4 text-gray-600">Entender essas "conversas" √© o segredo para criar scripts din√¢micos e que funcionam bem em seu servidor FiveM!</p>
                    </article>
                </section>

                <section id="s3" class="mb-16 scroll-mt-24">
                    <h2 class="text-4xl font-extrabold border-b border-blue-200 pb-4 mb-8 text-blue-800">3. Preparando o Ambiente: Sua Bancada de Trabalho</h2>
                    <p class="text-lg text-gray-700 leading-relaxed mb-8">Para come√ßar a desenvolver, precisamos montar seu ambiente de trabalho. √â como organizar sua mesa antes de come√ßar um grande projeto! Vamos instalar o FXServer, configurar o QBcore e criar a estrutura de pastas do seu primeiro recurso NUI.</p>
                     
                    <article id="s3_1" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">3.1 Instala√ß√£o do FXServer: O Cora√ß√£o do seu Servidor</h3>
                        <p class="mb-4 text-gray-600">O FXServer √© o programa que faz o seu servidor FiveM funcionar. Siga estes passos simples para ter o seu no ar:</p>
                        <ol class="list-decimal list-inside space-y-3 text-gray-700">
                            <li><strong>Baixe os Arquivos do FiveM:</strong> V√° ao site oficial de arquivos do FiveM: <a href="https://artifacts.fivem.net/" target="_blank" class="text-blue-600 hover:underline">https://artifacts.fivem.net/</a>. Baixe a vers√£o mais nova (geralmente a mais est√°vel) para o seu computador (Windows ou Linux).</li>
                            <li><strong>Crie uma Pasta:</strong> Crie uma pasta vazia em um lugar que voc√™ vai lembrar, tipo `C:\MeuServidorFiveM` (no Windows) ou `~/meuserver/` (no Linux). Essa pasta ser√° o lar do seu servidor.</li>
                            <li><strong>Coloque os Arquivos L√°:</strong> Descompacte o arquivo ZIP que voc√™ baixou (os "artefatos") direto dentro dessa nova pasta que voc√™ criou. Voc√™ vai ver um arquivo como `FXServer.exe` l√°.</li>
                            <li><strong>Pegue sua Chave Secreta (License Key):</strong> V√° no site Keymaster do FiveM: <a href="https://keymaster.fivem.net/" target="_blank" class="text-blue-600 hover:underline">https://keymaster.fivem.net/</a>. Fa√ßa login com sua conta do FiveM e clique para gerar uma nova chave. **Essa chave √© super importante para seu servidor funcionar!** Copie ela, vamos usar no pr√≥ximo passo.</li>
                            <li><strong>Crie o Arquivo de Configura√ß√£o (`server.cfg`):</strong> Dentro da pasta do seu servidor (onde est√° o `FXServer.exe`), crie um novo arquivo de texto e salve-o com o nome exato: `server.cfg`. √â aqui que voc√™ vai dizer ao servidor o que ele deve fazer.</li>
                            <li><strong>Preencha o `server.cfg` B√°sico:</strong> Copie e cole o c√≥digo abaixo no seu arquivo `server.cfg`. **N√£o se esque√ßa de trocar `"sua_chave_aqui"` pela chave que voc√™ copiou do Keymaster!**
<div class="code-block mt-4">
    <pre><code class="language-lua">-- Define as portas que o servidor vai usar para se comunicar
endpoint_add_tcp "0.0.0.0:30120"
endpoint_add_udp "0.0.0.0:30120"

-- Limite m√°ximo de jogadores no seu servidor
sv_maxclients 48

-- Uma 'tag' para seu servidor, que pode ser vista por outros (opcional)
sets tags "curso, fivem, iniciante"

-- Garante que scripts de 'trapa√ßa' n√£o rodem no seu servidor (mantenha como 0)
sv_scriptHookAllowed 0

-- MUITO IMPORTANTE: Coloque sua chave de licen√ßa FiveM aqui!
sv_licenseKey "sua_chave_aqui"

-- Garante que alguns recursos b√°sicos do FiveM rodem (essenciais)
ensure mapmanager -- Gerencia o mapa
ensure chat      -- Habilita o chat
ensure spawnmanager -- Gerencia onde os jogadores nascem
-- Estes s√£o os recursos M√çNIMOS para come√ßar.
</code></pre>
                            <div class="explanation-area mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-gray-700 hidden">
                                <p class="font-semibold mb-2">Explica√ß√£o da API Gemini:</p>
                                <div class="explanation-content"></div>
                                <div class="loading-spinner text-center mt-2 hidden">
                                    <div class="animate-spin inline-block w-4 h-4 border-2 border-current border-t-transparent text-blue-600 rounded-full" role="status"></div>
                                    <span class="ml-2">Carregando explica√ß√£o...</span>
                                </div>
                            </div>
</div>
                                <p class="mt-2 text-sm text-gray-600">
                                    <strong>Explica√ß√£o linha a linha do `server.cfg`:</strong><br>
                                    - `endpoint_add_tcp "0.0.0.0:30120"`: Diz ao servidor para abrir a porta `30120` para conex√µes TCP. √â a porta padr√£o para jogos.
                                    - `endpoint_add_udp "0.0.0.0:30120"`: Faz o mesmo, mas para conex√µes UDP, tamb√©m comum em jogos.
                                    - `sv_maxclients 48`: Define que seu servidor pode ter no m√°ximo 48 jogadores ao mesmo tempo. Voc√™ pode mudar esse n√∫mero.
                                    - `sets tags "curso, fivem, iniciante"`: Adiciona "etiquetas" ao seu servidor. Se voc√™ publicar, elas ajudam as pessoas a encontr√°-lo.
                                    - `sv_scriptHookAllowed 0`: Garante que scripts externos n√£o autorizados (muitas vezes usados para trapa√ßas) n√£o possam ser carregados. Mantenha isso como `0`.
                                    - `sv_licenseKey "sua_chave_aqui"`: **Aqui vai a sua chave de licen√ßa √∫nica.** Sem ela, o servidor n√£o inicia!
                                    - `ensure mapmanager`, `ensure chat`, `ensure spawnmanager`: Esses comandos dizem ao servidor para "garantir" que esses recursos b√°sicos do FiveM sejam carregados. Eles s√£o essenciais para um jogo funcional.
                                </p>
                            </li>
                            <li><strong>Ligue o FXServer:</strong>
                                <ul class="list-disc list-inside mt-2 text-gray-700 text-sm">
                                    <li><strong>No Windows:</strong> Abra o "Prompt de Comando" (CMD) ou "PowerShell". Use o comando `cd` para ir at√© a pasta do seu servidor (ex: `cd C:\MeuServidorFiveM`). Depois, digite `FXServer.exe` e aperte Enter.</li>
                                    <li><strong>No Linux:</strong> Abra um terminal. Navegue at√© a pasta do seu servidor (ex: `cd ~/meuserver/`). Depois, digite `./run.sh` e aperte Enter.</li>
                                </ul>
                                <p class="mt-2 text-gray-600">Se tudo deu certo, voc√™ vai ver um monte de texto no console do servidor. Isso significa que ele est√° online e pronto para receber jogadores! Deixe essa janela aberta enquanto estiver desenvolvendo.</p>
                            </li>
                        </ol>
                    </article>

                    <article id="s3_2" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">3.2 Configura√ß√£o do QBcore: Seu Kit de Ferramentas Extra</h3>
                        <p class="mb-4 text-gray-600">O QBcore √© um "kit de ferramentas" (framework) que j√° vem com v√°rios sistemas prontos para servidores de Roleplay. Us√°-lo nos poupa muito tempo e nos permite focar na integra√ß√£o NUI. Veja como adicion√°-lo ao seu servidor:</p>
                        <ol class="list-decimal list-inside space-y-3 text-gray-700">
                            <li><strong>Baixe o QBcore:</strong> O QBcore n√£o √© um arquivo s√≥, mas um conjunto de v√°rios recursos. Voc√™ pode encontrar o site oficial ou o reposit√≥rio no GitHub procurando por "qb-core framework FiveM". Baixe os arquivos (geralmente em ZIP) do `qb-core` principal e dos recursos b√°sicos dele (tipo `qb-spawn`, `qb-inventory`).</li>
                            <li><strong>Organize na Pasta `resources`:</strong> Dentro da pasta `resources` do seu FXServer, √© uma √≥tima ideia criar uma subpasta para frameworks, como `[qb]`. Descompacte todos os recursos do QBcore que voc√™ baixou dentro dessa nova pasta.
                                <p class="font-mono bg-gray-100 p-2 rounded-md mt-2 text-sm text-gray-800 shadow-inner">
                                    FXServer/<br>
                                    ‚îî‚îÄ‚îÄ resources/<br>
                                    &nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ [qb]/<br>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ qb-core/<br>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚îú‚îÄ‚îÄ qb-inventory/<br>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚îî‚îÄ‚îÄ ... (outros recursos do QBcore aqui)
                                </p>
                            </li>
                            <li><strong>Diga ao `server.cfg` para Ligar o QBcore:</strong> Agora, precisamos avisar ao seu servidor para carregar esses novos recursos. Abra seu arquivo `server.cfg` novamente e adicione as linhas `ensure` para cada recurso do QBcore. **A ordem √© importante:** o `qb-core` deve ser carregado antes de outros recursos que dependem dele.
<div class="code-block mt-4">
    <pre><code class="language-lua">-- Continua√ß√£o do seu server.cfg

-- Recursos b√°sicos (j√° vimos antes)
ensure mapmanager
ensure chat
ensure spawnmanager
-- ... (e outros que voc√™ j√° tem)

-- Agora, os recursos do QBcore!
ensure qb-core       -- O cora√ß√£o do framework
ensure qb-spawn      -- Gerencia o ponto de nascimento
ensure qb-inventory  -- O sistema de invent√°rio
ensure qb-clothes    -- Sistema de roupas
-- Adicione todos os outros recursos do QBcore que voc√™ baixou aqui.

-- Seu pr√≥prio recurso vir√° depois (se√ß√£o 4)
-- ensure meu_recurso 
</code></pre>
                            <div class="explanation-area mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-gray-700 hidden">
                                <p class="font-semibold mb-2">Explica√ß√£o da API Gemini:</p>
                                <div class="explanation-content"></div>
                                <div class="loading-spinner text-center mt-2 hidden">
                                    <div class="animate-spin inline-block w-4 h-4 border-2 border-current border-t-transparent text-blue-600 rounded-full" role="status"></div>
                                    <span class="ml-2">Carregando explica√ß√£o...</span>
                                </div>
                            </div>
</div>
                                <p class="mt-2 text-sm text-gray-600">
                                    <strong>Explica√ß√£o das linhas `ensure qb-...`:</strong><br>
                                    - Cada linha `ensure` diz ao servidor para carregar um recurso.
                                    - `qb-core` √© o principal; `qb-spawn`, `qb-inventory`, etc., s√£o m√≥dulos que adicionam funcionalidades espec√≠ficas ao QBcore.
                                    - A ordem importa! Pense como um lego: voc√™ precisa da base antes de colocar as pe√ßas em cima.
                                </p>
                            </li>
                            <li><strong>Inicie ou Reinicie seu Servidor:</strong> Salve o `server.cfg` e reinicie seu FXServer. Se tudo estiver certo, voc√™ ver√° mensagens no console sobre o QBcore sendo carregado. Prontinho, seu servidor est√° turbinado com o QBcore!</li>
                        </ol>
                        <p class="mt-4 text-gray-600">Agora seu ambiente est√° pronto! O FXServer est√° online e o QBcore est√° instalado para nos ajudar a criar coisas incr√≠veis.</p>
                    </article>

                    <article id="s3_3" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">3.3 Estrutura de Pastas e Arquivos do Seu Recurso NUI: Mantenha a Casa Arrumada!</h3>
                        <p class="mb-4 text-gray-600">Uma boa organiza√ß√£o √© como ter gavetas etiquetadas: voc√™ sempre sabe onde encontrar o que precisa! Para um recurso que usa NUI (nossa interface web), a estrutura de pastas √© bem espec√≠fica. Veja como ela deve ser:</p>
                        <div class="bg-gray-800 text-white p-6 rounded-xl font-mono text-base shadow-lg">
                            <div class="flex items-center">
                                <span class="mr-2 text-yellow-300">üìÅ</span><span>meu_primeiro_recurso/</span>
                            </div>
                            <div class="pl-8 border-l-2 border-gray-700 ml-4 mt-2">
                                <div class="flex items-center mt-2">
                                    <span class="mr-2 text-yellow-300">üìÑ</span><span class="text-yellow-400">fxmanifest.lua</span> <span class="text-gray-400 ml-2">// O "manual de instru√ß√µes" do seu recurso</span>
                                </div>
                                <div class="flex items-center mt-2">
                                    <span class="mr-2 text-yellow-300">üìÑ</span><span class="text-blue-400">client.lua</span> <span class="text-gray-400 ml-2">// O que roda no computador de CADA jogador</span>
                                </div>
                                <div class="flex items-center mt-2">
                                    <span class="mr-2 text-yellow-300">üìÑ</span><span class="text-green-400">server.lua</span> <span class="text-gray-400 ml-2">// O que roda SOMENTE no computador do servidor</span>
                                </div>
                                <div class="flex items-center mt-2">
                                    <span class="mr-2 text-yellow-300">üìÅ</span><span>html/</span> <span class="text-gray-400 ml-2">// Sua "miniatura de site" aqui dentro!</span>
                                </div>
                                <div class="pl-8 border-l-2 border-gray-700 ml-4 mt-2">
                                    <div class="flex items-center mt-2">
                                        <span class="mr-2 text-yellow-300">üìÑ</span><span class="text-red-400">index.html</span> <span class="text-gray-400 ml-2">// A estrutura (esqueleto) da sua tela NUI</span>
                                    </div>
                                    <div class="flex items-center mt-2">
                                        <span class="mr-2 text-yellow-300">üìÑ</span><span class="text-purple-400">style.css</span> <span class="text-gray-400 ml-2">// A "roupa" (estilo) da sua tela NUI</span>
                                    </div>
                                    <div class="flex items-center mt-2">
                                        <span class="mr-2 text-yellow-300">üìÑ</span><span class="text-yellow-300">script.js</span> <span class="text-gray-400 ml-2">// A "intelig√™ncia" (intera√ß√£o) da sua tela NUI</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="mt-6 text-gray-600">Cada um desses arquivos tem um papel vital e espec√≠fico:</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700 mt-4">
                            <li><strong>`fxmanifest.lua` (O Manual):</strong> Ele √© o primeiro a ser lido pelo FiveM. Diz quais arquivos (Lua, HTML, CSS, JS) seu recurso usa e se eles s√£o para o cliente ou servidor. Sem ele, o FiveM n√£o sabe que seu recurso existe!</li>
                            <li><strong>`client.lua` (O Ajudante Individual):</strong> Este script roda no computador de **cada jogador**. Ele lida com o que o jogador v√™ e faz, como mostrar/esconder a NUI, verificar se o jogador apertou uma tecla, e √© a ponte principal entre a NUI e o servidor.</li>
                            <li><strong>`server.lua` (O Gerente Central):</strong> Este script roda **apenas uma vez** no computador do servidor. Ele √© respons√°vel por coisas que afetam todos os jogadores (como economias, invent√°rios globais), e por opera√ß√µes que precisam ser super seguras, tipo mexer no banco de dados.</li>
                            <li><strong>`html/` (A Caixa de Ferramentas Visuais):</strong> Esta √© uma pasta especial. Tudo o que sua interface NUI precisa (o HTML, CSS, JavaScript, talvez imagens e fontes) deve estar aqui dentro. O FiveM "serve" esses arquivos para o jogador quando a NUI √© ativada.</li>
                            <li><strong>`index.html` (A Estrutura da Tela):</strong> √â a p√°gina HTML que voc√™ vai ver. Ela define os "blocos" da sua interface: bot√µes, textos, caixas. √â o esqueleto.</li>
                            <li><strong>`style.css` (A Beleza da Tela):</strong> Este arquivo CSS d√° o "estilo" ao seu `index.html`. Ele define as cores, fontes, tamanhos, e como as coisas ficam organizadas na tela. √â a "roupa" da sua interface!</li>
                            <li><strong>`script.js` (A Intelig√™ncia da Tela):</strong> Este √© o JavaScript da sua NUI. Ele faz a interface ser interativa: quando voc√™ clica em um bot√£o, o `script.js` √© quem reage e pode enviar uma mensagem para o `client.lua`. Ele tamb√©m recebe mensagens do `client.lua` para atualizar a tela.</li>
                        </ul>
                        <p class="mt-4 text-gray-600">Seguindo essa organiza√ß√£o, seu projeto ser√° f√°cil de entender, mesmo para um iniciante, e muito mais simples de expandir no futuro!</p>
                    </article>
                </section>

                <section id="s4" class="mb-16 scroll-mt-24">
                    <h2 class="text-4xl font-extrabold border-b border-blue-200 pb-4 mb-8 text-blue-800">4. Criando o Back-end em Lua: O C√©rebro do seu Script</h2>
                    <p class="text-lg text-gray-700 leading-relaxed mb-8">O "back-end" √© a parte da l√≥gica que faz seu script funcionar. No FiveM, isso √© escrito em Lua. Vamos criar os arquivos que formam essa parte do seu recurso, focando no essencial para sua primeira integra√ß√£o!</p>
                    
                    <article id="s4_1" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">4.1 O Arquivo `fxmanifest.lua`: Apresentando Seu Recurso ao FiveM</h3>
                        <p class="mb-4 text-gray-600">Lembra do "manual de instru√ß√µes"? √â ele! O `fxmanifest.lua` √© o primeiro arquivo que o FiveM l√™ quando carrega seu recurso. Ele diz ao servidor o que existe na sua pasta e como ele deve carregar tudo.</p>
                        <div class="code-block">
                            <pre><code class="language-lua">-- Define a vers√£o do manifesto. 'cerulean' √© a vers√£o mais atual.
fx_version 'cerulean'
-- Diz que este recurso √© para o jogo GTA V.
games { 'gta5' }

-- Informa√ß√µes b√°sicas sobre seu recurso.
author 'Seu Nome'
description 'Meu primeiro script de integra√ß√£o NUI!'
version '1.0.0'

-- Declara qual script Lua roda no lado do cliente (no PC do jogador).
client_script 'client.lua'

-- Declara qual script Lua roda no lado do servidor (no PC do servidor).
server_script 'server.lua'

-- MUITO IMPORTANTE para NUI: Diz qual arquivo HTML √© sua interface.
ui_page 'html/index.html'

-- Lista TODOS os arquivos da sua pasta 'html' que o FiveM precisa enviar para o jogador.
-- Se um arquivo da NUI n√£o estiver aqui, ele n√£o vai funcionar!
files {
    'html/index.html',
    'html/style.css',
    'html/script.js'
}
</code></pre>
                            <div class="explanation-area mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-gray-700 hidden">
                                <p class="font-semibold mb-2">Explica√ß√£o da API Gemini:</p>
                                <div class="explanation-content"></div>
                                <div class="loading-spinner text-center mt-2 hidden">
                                    <div class="animate-spin inline-block w-4 h-4 border-2 border-current border-t-transparent text-blue-600 rounded-full" role="status"></div>
                                    <span class="ml-2">Carregando explica√ß√£o...</span>
                                </div>
                            </div>
                        </div>
                        <p class="mt-4 text-gray-600">
                            <strong>Explica√ß√£o linha a linha do `fxmanifest.lua`:</strong><br>
                            - `fx_version 'cerulean'` e `games { 'gta5' }`: S√£o como cabe√ßalhos que informam a vers√£o do manifesto e para qual jogo o recurso √©. √â padr√£o.
                            - `author`, `description`, `version`: Campos para voc√™ descrever seu script.
                            - `client_script 'client.lua'`: Diz ao FiveM: "Ei, carrega o arquivo `client.lua` no computador de cada jogador!". √â onde a l√≥gica que interage com a NUI vai morar.
                            - `server_script 'server.lua'`: Diz ao FiveM: "Carrega o arquivo `server.lua` apenas uma vez no computador do servidor!". √â onde a l√≥gica segura e geral vai morar.
                            - `ui_page 'html/index.html'`: **Essa linha √© a chave para a NUI!** Ela diz ao FiveM que sua interface web principal est√° no arquivo `index.html` dentro da pasta `html`.
                            - `files { ... }`: Esta √© uma lista super importante! Voc√™ deve listar **todos os arquivos (HTML, CSS, JavaScript, imagens, fontes, etc.)** que est√£o dentro da sua pasta `html/` e que a sua interface NUI vai usar. Se voc√™ esquecer um arquivo aqui, a NUI n√£o vai conseguir encontr√°-lo e dar√° erro!
                        </p>
                    </article>

                    <article id="s4_2" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">4.2 Scripts do Lado do Cliente (`client.lua`): O Ajudante do Jogador</h3>
                        <p class="mb-4 text-gray-600">O `client.lua` roda no computador de cada jogador. √â o seu elo de liga√ß√£o entre o jogo, a NUI e, indiretamente, o servidor. Ele vai cuidar de mostrar/esconder a interface e de enviar/receber mensagens dela.</p>
                        <div class="code-block">
                            <pre><code class="language-lua">-- Uma vari√°vel simples para saber se a NUI est√° aberta ou fechada.
local NUIAberta = false

-- Fun√ß√£o para mostrar a interface NUI.
function MostrarNUI()
    NUIAberta = true
    -- Diz ao FiveM para dar foco √† NUI e mostrar o cursor do mouse.
    SetNuiFocus(true, true) 
    -- Envia uma mensagem para o JavaScript da NUI. O JS vai "ouvir" essa mensagem e mostrar a tela.
    SendNUIMessage({ acao = 'mostrar' })
end

-- Fun√ß√£o para esconder a interface NUI.
function EsconderNUI()
    NUIAberta = false
    -- Tira o foco da NUI e esconde o cursor, devolvendo o controle ao jogo.
    SetNuiFocus(false, false)
    -- Envia uma mensagem para o JavaScript da NUI. O JS vai "ouvir" essa mensagem e esconder a tela.
    SendNUIMessage({ acao = 'esconder' })
end

-- Este √© um 'ouvinte' para mensagens que v√™m da sua NUI (do JavaScript).
-- O nome 'cliqueDoBotao' aqui deve ser o mesmo que o JavaScript vai "chamar".
RegisterNUICallback('cliqueDoBotao', function(dadosRecebidos, funcaoResposta)
    -- Quando a NUI envia uma mensagem, ela aparece no console do jogador (aperte F8 no jogo).
    print('Bot√£o clicado na NUI! ID do bot√£o: ' .. dadosRecebidos.idDoBotao)
    
    -- Exemplo: Se o bot√£o clicado fosse um bot√£o de "comprar", 
    -- aqui voc√™ avisaria o servidor:
    -- TriggerServerEvent('meuRecurso:comprarItem', dadosRecebidos.idDoItem)

    -- A 'funcaoResposta' √© como voc√™ manda um "ok" ou "deu erro" de volta para o JavaScript.
    funcaoResposta('ok') -- Envia 'ok' de volta para a NUI.
end)

-- Este √© outro 'ouvinte' para quando a NUI quer ser fechada (tipo, se o jogador apertar ESC na NUI).
RegisterNUICallback('escape', function(_, funcaoResposta)
    EsconderNUI() -- Chama a fun√ß√£o para esconder a NUI.
    funcaoResposta('ok') -- Avisa a NUI que deu certo.
end)

-- Registra um comando que voc√™ pode digitar no chat do jogo (ex: /abrirtela).
RegisterCommand('abrirtela', function()
    if not NUIAberta then -- S√≥ abre se j√° n√£o estiver aberta.
        MostrarNUI()
    end
end, false) -- 'false' significa que qualquer jogador pode usar este comando.

-- Cria uma "tarefa" que roda o tempo todo no jogo.
Citizen.CreateThread(function()
    while true do
        Citizen.Wait(0) -- MUITO IMPORTANTE: Essa linha faz o script "respirar" para n√£o travar o jogo.
        
        -- Verifica se a NUI est√° aberta E se o jogador soltou a tecla ESC (c√≥digo 322).
        if NUIAberta and IsControlJustReleased(0, 322) then
            EsconderNUI() -- Se sim, esconde a NUI.
        end
    end
end)
</code></pre>
                            <div class="explanation-area mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-gray-700 hidden">
                                <p class="font-semibold mb-2">Explica√ß√£o da API Gemini:</p>
                                <div class="explanation-content"></div>
                                <div class="loading-spinner text-center mt-2 hidden">
                                    <div class="animate-spin inline-block w-4 h-4 border-2 border-current border-t-transparent text-blue-600 rounded-full" role="status"></div>
                                    <span class="ml-2">Carregando explica√ß√£o...</span>
                                </div>
                            </div>
                        </div>
                        <p class="mt-4 text-gray-600">
                            <strong>Explica√ß√£o linha a linha do `client.lua`:</strong><br>
                            - `local NUIAberta = false`: Uma pequena "bandeira" que guardamos para saber se a sua tela NUI est√° vis√≠vel ou n√£o. Come√ßa como `false` (fechada).
                            - `function MostrarNUI()`: Essa fun√ß√£o √© o que voc√™ chama quando quer que sua tela NUI apare√ßa.
                                - `NUIAberta = true`: Liga nossa "bandeira" para `true`.
                                - `SetNuiFocus(true, true)`: Uma fun√ß√£o especial do FiveM. O primeiro `true` diz: "O jogador vai interagir com a NUI agora". O segundo `true` diz: "Mostra o mouse para ele poder clicar!".
                                - `SendNUIMessage({ acao = 'mostrar' })`: Essa √© a mensagem que o Lua envia para o JavaScript da sua NUI. `acao = 'mostrar'` √© um recado para a NUI saber o que fazer.
                            - `function EsconderNUI()`: O oposto de `MostrarNUI()`. Ela esconde a NUI.
                                - `NUIAberta = false`: Desliga nossa "bandeira`.
                                - `SetNuiFocus(false, false)`: Devolve o controle do mouse e do teclado para o jogo e esconde o cursor.
                                - `SendNUIMessage({ acao = 'esconder' })`: Manda um recado para a NUI se esconder.
                            - `RegisterNUICallback('cliqueDoBotao', function(dadosRecebidos, funcaoResposta) ... end)`: **Essa √© a ponte do NUI para o Lua!** √â uma fun√ß√£o especial que fica "escutando" por mensagens que v√™m do JavaScript da NUI.
                                - `'cliqueDoBotao'`: √â o nome que voc√™ d√° para esse "canal de comunica√ß√£o". O JavaScript vai usar esse nome para mandar a mensagem.
                                - `dadosRecebidos`: √â a informa√ß√£o que o JavaScript te enviou (tipo, qual bot√£o foi clicado).
                                - `funcaoResposta`: √â uma fun√ß√£o que voc√™ pode usar para mandar um recado de volta para o JavaScript.
                                - `print(...)`: Serve para voc√™ ver mensagens no console do FiveM (aperte `F8` no jogo para ver). Super √∫til para depurar!
                                - `TriggerServerEvent(...)`: (Comentado no exemplo para simplificar) √â como voc√™ "passa a bola" para o servidor. Se o que a NUI fez precisa de uma a√ß√£o geral ou segura (como tirar dinheiro do jogador), o `client.lua` avisa o `server.lua`.
                            - `RegisterNUICallback('escape', ...)`: Um callback espec√≠fico para quando a NUI quer se fechar, geralmente quando o jogador aperta ESC.
                            - `RegisterCommand('abrirtela', function() ... end, false)`: Permite que voc√™ digite `/abrirtela` no chat do jogo para testar. O `false` no final significa que qualquer jogador pode usar. Se fosse `true`, s√≥ admins (com permiss√£o) poderiam.
                            - `Citizen.CreateThread(function() ... end)`: Pense nisso como uma tarefa que seu script Lua vai ficar fazendo repetidamente.
                                - `while true do`: Cria um loop infinito, para a tarefa nunca parar.
                                - `Citizen.Wait(0)`: **MUITO IMPORTANTE: Essa linha faz o script "respirar" para n√£o travar o jogo.**
                                - `IsControlJustReleased(0, 322)`: Verifica se uma tecla espec√≠fica (no caso, `322` √© o c√≥digo para a tecla ESC) foi *acabada de ser solta*. O `0` √© para o controle do mouse/teclado.
                        </p>
                    </article>

                     <article id="s4_3" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">4.3 Scripts do Lado do Servidor (`server.lua`): O Gerente Geral</h3>
                        <p class="mb-4 text-gray-600">O `server.lua` √© o "c√©rebro central" do seu servidor. Ele roda apenas uma vez, no computador que hospeda o jogo. Sua principal responsabilidade √© lidar com a l√≥gica que afeta todos os jogadores, e com a√ß√µes que precisam ser super seguras, como mexer em dinheiro, invent√°rio ou banco de dados.</p>
                        <p class="mb-4 text-gray-600">Ele se comunica com os `client.lua`s de cada jogador usando "eventos de rede".</p>
                        <div class="code-block">
                            <pre><code class="language-lua">-- Primeiro, registramos um evento que o client.lua pode "disparar" para o servidor.
-- Pense nisso como "abrindo um canal" para receber mensagens do cliente.
-- O nome 'meuRecurso:fazerAlgoNoServidor' √© um exemplo.
RegisterNetEvent('meuRecurso:fazerAlgoNoServidor')

-- Depois, dizemos o que fazer quando esse evento √© "ouvido".
AddEventHandler('meuRecurso:fazerAlgoNoServidor', function(dadosQueVieramDoCliente)
    -- 'source' √© uma vari√°vel especial que diz QUAL jogador disparou este evento.
    local jogadorID = source 
    
    print('Mensagem recebida do jogador ' .. jogadorID .. ' no servidor!')
    print('Dados do cliente: ' .. json.encode(dadosQueVieramDoCliente)) -- Mostra os dados recebidos.

    -- Exemplo SIMPLES de l√≥gica no servidor:
    -- Imagine que o cliente pediu para "dar" um item.
    -- O servidor valida se a quantidade √© v√°lida e ent√£o d√° o item.
    if dadosQueVieramDoCliente.item == 'agua' and dadosQueVieramDoCliente.quantidade > 0 then
        -- Esta linha usaria uma fun√ß√£o do QBcore para dar um item.
        -- QBCore.Functions.GetPlayer(jogadorID).Functions.AddItem('agua', dadosQueVieramDoCliente.quantidade)
        print('Servidor: Jogador ' .. jogadorID .. ' recebeu ' .. dadosQueVieramDoCliente.quantidade .. ' de √°gua.')
        
        -- Avisa o jogador de volta que deu certo!
        -- TriggerClientEvent('QBCore:Notify', jogadorID, 'Voc√™ recebeu √°gua!', 'success')
        TriggerClientEvent('chat:addMessage', jogadorID, {
            color = { 0, 255, 0 }, -- Cor verde
            args = { '[Servidor]', 'Voc√™ recebeu √°gua!' }
        })
    else
        print('Servidor: Tentativa inv√°lida de dar item ao jogador ' .. jogadorID .. '.')
        -- Avisa o jogador que algo deu errado.
        TriggerClientEvent('chat:addMessage', jogadorID, {
            color = { 255, 0, 0 }, -- Cor vermelha
            args = { '[Servidor]', 'Erro na transa√ß√£o. Tente novamente.' }
        })
    end
end)

-- Voc√™ tamb√©m pode criar comandos que s√≥ funcionam no servidor (e para admins, por exemplo).
RegisterCommand('avisartodos', function(source, args, rawCommand)
    -- Se source == 0, o comando foi digitado no console do servidor.
    if source == 0 then
        local mensagem = table.concat(args, ' ') -- Junta as palavras da mensagem.
        TriggerClientEvent('chat:addMessage', -1, { -- -1 envia para TODOS os jogadores.
            color = { 255, 165, 0 }, -- Cor laranja
            args = { '[AN√öNCIO DO SERVIDOR]', mensagem }
        })
        print('Servidor: An√∫ncio enviado para todos: ' .. mensagem)
    else
        -- Se n√£o √© do console, √© um jogador. Apenas admins devem usar isso.
        -- Esta linha usaria uma fun√ß√£o do QBcore para checar permiss√£o de admin.
        -- if QBCore.Functions.GetPlayer(source).Functions.HasPermission('admin') then
        TriggerClientEvent('chat:addMessage', source, {
            color = { 255, 0, 0 },
            args = { '[Servidor]', 'Voc√™ n√£o tem permiss√£o para usar este comando.' }
        })
        print('Servidor: Jogador ' .. source .. ' tentou usar comando de admin sem permiss√£o.')
        -- end
    end
end, true) -- 'true' significa que este comando √© RESTRITO (s√≥ admins por padr√£o).
</code></pre>
                            <div class="explanation-area mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-gray-700 hidden">
                                <p class="font-semibold mb-2">Explica√ß√£o da API Gemini:</p>
                                <div class="explanation-content"></div>
                                <div class="loading-spinner text-center mt-2 hidden">
                                    <div class="animate-spin inline-block w-4 h-4 border-2 border-current border-t-transparent text-blue-600 rounded-full" role="status"></div>
                                    <span class="ml-2">Carregando explica√ß√£o...</span>
                                </div>
                            </div>
                        </div>
                        <p class="mt-4 text-gray-600">
                            <strong>Explica√ß√£o linha a linha do `server.lua`:</strong><br>
                            - `RegisterNetEvent('meuRecurso:fazerAlgoNoServidor')`: Essa linha "registra" um evento de rede. Significa que o servidor est√° pronto para "ouvir" quando um `client.lua` dispara um evento com esse nome. Pense nisso como ligar um telefone para que as liga√ß√µes possam ser recebidas.
                            - `AddEventHandler('meuRecurso:fazerAlgoNoServidor', function(dadosQueVieramDoCliente) ... end)`: Aqui, definimos o que acontece quando o evento `meuRecurso:fazerAlgoNoServidor` √© "ouvido".
                                - `dadosQueVieramDoCliente`: S√£o as informa√ß√µes que o `client.lua` enviou junto com o evento.
                                - `local jogadorID = source`: `source` √© uma vari√°vel m√°gica no `server.lua` que, em eventos recebidos do cliente, **sempre diz qual jogador** disparou o evento. Isso √© crucial para saber quem est√° interagindo com o servidor!
                                - `print(...)`: Novamente, para depurar. Voc√™ ver√° essas mensagens no console do seu FXServer.
                                - `json.encode(dadosQueVieramDoCliente)`: Uma fun√ß√£o √∫til para transformar uma tabela Lua em uma string JSON, o que ajuda a ver os dados de forma leg√≠vel no console.
                                - `if dadosQueVieramDoCliente.item == 'agua' ...`: Este √© um exemplo de **valida√ß√£o de dados no servidor**. Mesmo que o cliente diga que quer "dar √°gua", o servidor *sempre* verifica se √© uma a√ß√£o v√°lida. **Sempre valide tudo no servidor para seguran√ßa!**
                                - `TriggerClientEvent('chat:addMessage', jogadorID, { ... })`: Esta √© uma forma simples de enviar uma mensagem para o chat do jogo de um jogador espec√≠fico. `-1` como `id` enviaria para todos. √â uma forma de dar feedback ao jogador. (O `QBCore:Notify` √© uma notifica√ß√£o visual mais bonita do QBcore, mas o `chat:addMessage` √© mais b√°sico e universal).
                            - `RegisterCommand('avisartodos', function(source, args, rawCommand) ... end, true)`: Cria um comando que voc√™ pode digitar no chat do jogo.
                                - `source == 0`: Se o `source` √© `0`, significa que o comando foi executado diretamente no console do servidor (o CMD/terminal que voc√™ deixou aberto).
                                - `table.concat(args, ' ')`: Junta todas as palavras da mensagem que voc√™ digitou no chat em uma √∫nica string.
                                - `TriggerClientEvent('chat:addMessage', -1, { ... })`: Envia uma mensagem para o chat de **TODOS** os jogadores (`-1` significa todos).
                                - `true` no final de `RegisterCommand`: Torna este comando **restrito**. Por padr√£o, apenas administradores com permiss√£o podem us√°-lo. **√â uma boa pr√°tica para comandos poderosos!**
                        </p>
                        <p class="mt-4 text-gray-600">O `server.lua` √© o seu guardi√£o e central de controle. Ele garante que a l√≥gica principal funcione de forma justa e segura para todos os jogadores.</p>
                    </article>
                </section>
                
                <section id="s5" class="mb-16 scroll-mt-24">
                    <h2 class="text-4xl font-extrabold border-b border-blue-200 pb-4 mb-8 text-blue-800">5. Desenvolvendo a Interface NUI (Front-end): A Beleza da Sua Tela</h2>
                    <p class="text-lg text-gray-700 leading-relaxed mb-8">Agora que temos o "c√©rebro" em Lua, √© hora de criar a "cara" do seu script! A NUI √© onde a magia visual acontece, usando HTML para a estrutura, CSS para a beleza e JavaScript para a intelig√™ncia. Vamos construir sua primeira interface interativa!</p>

                    <article id="s5_1" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">5.1 Criando a P√°gina HTML (`index.html`): O Esqueleto da sua Tela</h3>
                        <p class="mb-4 text-gray-600">O `index.html` √© a p√°gina principal da sua interface NUI. Ele define todos os elementos que o jogador ver√°, como textos, bot√µes e caixas. Pense nele como o esqueleto do seu site ou aplicativo.</p>
                         <div class="code-block">
                            <pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="pt"&gt; &lt;!-- Indica que o idioma da p√°gina √© Portugu√™s --&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt; &lt;!-- Garante que caracteres especiais (como acentos) apare√ßam certo --&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt; &lt;!-- MUITO IMPORTANTE para a tela se ajustar ao tamanho do dispositivo (celular, tablet, PC) --&gt;
    &lt;title&gt;Minha Primeira NUI&lt;/title&gt; &lt;!-- O t√≠tulo da sua p√°gina (n√£o aparece no jogo, mas √© √∫til para depura√ß√£o) --&gt;
    &lt;link rel="stylesheet" href="style.css"&gt; &lt;!-- Conecta seu arquivo CSS para deixar a p√°gina bonita --&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;!-- Este √© o principal "cont√™iner" da sua interface. Come√ßa escondido com a classe 'nui-hidden'. --&gt;
    &lt;div id="container" class="nui-hidden"&gt; 
        &lt;h1 class="text-3xl font-extrabold text-white mb-4"&gt;Bem-vindo(a)!&lt;/h1&gt;
        &lt;p class="text-gray-200 mb-6"&gt;Clique para ver a m√°gica da integra√ß√£o!&lt;/p&gt;
        
        &lt;!-- Este √© o bot√£o que vamos usar para interagir --&gt;
        &lt;button id="btnInteragir" class="bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 ease-in-out"&gt;
            Interagir com o Back-end
        &lt;/button&gt;
        
        &lt;!-- Este √© o bot√£o para fechar a interface --&gt;
        &lt;button id="btnClose" class="bg-red-600 hover:bg-red-700 active:bg-red-800 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 ease-in-out ml-4"&gt;
            Fechar NUI
        &lt;/button&gt;
        
        &lt;!-- Esta div vai mostrar mensagens de feedback --&gt;
        &lt;div id="mensagemFeedback" class="mt-6 text-base text-yellow-300 font-medium"&gt;&lt;/div&gt;
    &lt;/div&gt;
    
    &lt;!-- Conecta seu arquivo JavaScript. Coloque no final do body para o HTML carregar primeiro. --&gt;
    &lt;script src="script.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
                            <div class="explanation-area mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-gray-700 hidden">
                                <p class="font-semibold mb-2">Explica√ß√£o da API Gemini:</p>
                                <div class="explanation-content"></div>
                                <div class="loading-spinner text-center mt-2 hidden">
                                    <div class="animate-spin inline-block w-4 h-4 border-2 border-current border-t-transparent text-blue-600 rounded-full" role="status"></div>
                                    <span class="ml-2">Carregando explica√ß√£o...</span>
                                </div>
                            </div>
                        </div>
                        <p class="mt-4 text-gray-600">
                            <strong>Explica√ß√£o linha a linha do `index.html`:</strong><br>
                            - `<!DOCTYPE html>`, `<html>`, `<head>`, `<body>`: S√£o a estrutura b√°sica de qualquer p√°gina HTML. N√£o se preocupe muito com elas por agora, s√£o o padr√£o.
                            - `<meta charset="UTF-8">`: √â importante para que todos os caracteres (como "√ß" ou "√£") apare√ßam corretamente na sua tela.
                            - `<meta name="viewport" content="width=device-width, initial-scale=1.0">`: **Essa linha √© fundamental para que sua NUI se ajuste a diferentes telas!** Sem ela, sua interface pode ficar estranha no celular ou em telas grandes.
                            - `<title>Minha Primeira NUI</title>`: O texto que aparece na aba do navegador quando voc√™ abre a p√°gina. √ötil para organizar suas janelas de depura√ß√£o.
                            - `<link rel="stylesheet" href="style.css">`: Essa linha "conecta" seu arquivo `style.css` (onde est√° o estilo) com esta p√°gina HTML.
                            - `<div id="container" class="nui-hidden">`: Este √© o principal "bloco" da sua interface. Tudo o que voc√™ quer que apare√ßa na tela vai dentro dele.
                                - `id="container"`: √â um "nome" √∫nico que damos a esse bloco. O JavaScript vai usar esse nome para encontrar o bloco e mostrar/esconder a interface.
                                - `class="nui-hidden"`: √â um "sobrenome" que damos a ele. Essa classe ser√° usada pelo CSS para que a tela comece **escondida** e pelo JavaScript para alternar a visibilidade.
                            - `<h1>`, `<p>`: S√£o tags HTML para t√≠tulos e par√°grafos. Usamos algumas classes do Tailwind CSS (como `text-2xl`, `font-bold`, `text-white`) para dar um estilo r√°pido.
                            - `<button id="btnInteragir">`: Um bot√£o interativo!
                                - `id="btnInteragir"`: Outro "nome" √∫nico para o JavaScript saber qual bot√£o foi clicado.
                                - As classes do Tailwind CSS (como `bg-blue-600`, `hover:bg-blue-700`, `rounded`) servem para deix√°-lo com um visual bonito e moderno.
                            - `<div id="mensagemFeedback">`: Uma √°rea onde podemos mostrar mensagens para o jogador, tipo "Sua a√ß√£o foi um sucesso!".
                            - `<script src="script.js"></script>`: Essa linha "conecta" seu arquivo `script.js` (onde est√° a intelig√™ncia) com esta p√°gina HTML. √â importante que ela esteja no final do `<body>`, para garantir que todos os elementos HTML j√° existam quando o JavaScript tentar manipul√°-los.
                        </p>
                        <p class="mt-4 text-gray-600">Este HTML √© o alicerce visual. Com ele, j√° podemos ver onde tudo vai ficar na tela. Agora, vamos deixar ele bonito com o CSS!</p>
                    </article>

                    <article id="s5_2" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">5.2 Estilizando com CSS (`style.css`): A Roupa da Sua Tela</h3>
                        <p class="mb-4 text-gray-600">O `style.css` √© onde voc√™ adiciona cores, fontes, tamanhos e define a organiza√ß√£o visual da sua interface. Ele transforma o "esqueleto" HTML em algo bonito e funcional. √â a "roupa" da sua NUI!</p>
                         <div class="code-block">
                            <pre><code class="language-css">/* IMPORTANTE: Isso faz o fundo da NUI ser transparente, para voc√™ ver o jogo por tr√°s! */
body {
    margin: 0; /* Remove margem padr√£o do body */
    padding: 0; /* Remove preenchimento padr√£o do body */
    background-color: transparent; /* FUNDAMENTAL: Deixa o fundo invis√≠vel */
    font-family: 'Inter', sans-serif; /* Define a fonte para todo o texto */
    color: #ecf0f1; /* Cor do texto padr√£o (um cinza bem clarinho) */
    display: flex; /* Transforma o body em um cont√™iner flex√≠vel */
    justify-content: center; /* Centraliza o conte√∫do horizontalmente */
    align-items: center; /* Centraliza o conte√∫do verticalmente */
    min-height: 100vh; /* Faz com que o body ocupe 100% da altura da tela */
    overflow: hidden; /* Esconde qualquer coisa que vaze da tela, evitando barras de rolagem */
}

/* Essa classe √© usada pelo JavaScript para esconder ou mostrar sua interface */
.nui-hidden {
    display: none !important; /* 'important' garante que essa regra sempre funcione */
}

/* Estilo para o nosso cont√™iner principal (#container) */
#container {
    background: rgba(44, 62, 80, 0.95); /* Fundo cinza escuro mais opaco */
    padding: 40px; /* Mais espa√ßamento interno */
    border-radius: 16px; /* Mais arredondado */
    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.5); /* Sombra mais forte para profundidade */
    text-align: center; /* Alinha o texto ao centro */
    max-width: 600px; /* Aumenta a largura m√°xima */
    width: 90%; /* Ocupa 90% da largura dispon√≠vel, mas respeita o max-width */
    border: 2px solid rgba(52, 73, 94, 0.8); /* Borda mais definida */
    
    /* Propriedades para anima√ß√£o de entrada e sa√≠da */
    transform: translateY(30px); /* Come√ßa 30px abaixo da posi√ß√£o final */
    opacity: 0; /* Come√ßa totalmente transparente */
    transition: transform 0.6s ease-out, opacity 0.6s ease-out; /* Anima√ß√£o mais suave e lenta */
}

/* Quando a classe 'is-visible' √© adicionada (pelo JS), a interface aparece com anima√ß√£o */
#container.is-visible {
    transform: translateY(0); /* Volta para a posi√ß√£o normal */
    opacity: 1; /* Fica totalmente vis√≠vel */
}

/* Estilos b√°sicos para bot√µes (usaremos as classes do Tailwind diretamente no HTML, mas aqui est√° um exemplo CSS puro) */
button {
    cursor: pointer; /* Muda o cursor para uma m√£ozinha quando passa por cima */
    transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease; /* Anima√ß√£o suave para hover/clique */
    outline: none; /* Remove o contorno azul que aparece ao clicar */
}

button:hover {
    transform: translateY(-2px); /* Levanta o bot√£o um pouco no hover */
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2); /* Sombra no hover */
}

button:active {
    transform: translateY(0); /* Volta para a posi√ß√£o normal ao clicar */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Sombra mais sutil no active */
}
</code></pre>
                            <div class="explanation-area mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-gray-700 hidden">
                                <p class="font-semibold mb-2">Explica√ß√£o da API Gemini:</p>
                                <div class="explanation-content"></div>
                                <div class="loading-spinner text-center mt-2 hidden">
                                    <div class="animate-spin inline-block w-4 h-4 border-2 border-current border-t-transparent text-blue-600 rounded-full" role="status"></div>
                                    <span class="ml-2">Carregando explica√ß√£o...</span>
                                </div>
                            </div>
                        </div>
                        <p class="mt-4 text-gray-600">
                            <strong>Explica√ß√£o linha a linha do `style.css`:</strong><br>
                            - `body { ... }`: Essas regras s√£o para o corpo da sua p√°gina HTML, que √© o fundo.
                                - `background-color: transparent;`: **Essa √© a linha mais importante aqui!** Ela faz o fundo da sua NUI ficar "invis√≠vel", permitindo que o jogo (GTA V) seja visto por tr√°s. Se voc√™ colocar uma cor aqui, ela vai cobrir a tela do jogo!
                                - `display: flex; justify-content: center; align-items: center; min-height: 100vh;`: Um combo m√°gico do CSS Flexbox! Ele faz com que o conte√∫do dentro do `<body>` (no nosso caso, o `#container`) seja **centralizado** tanto na horizontal quanto na vertical na tela do jogo.
                                - `overflow: hidden;`: Garante que n√£o apare√ßam barras de rolagem indesejadas se o conte√∫do for maior que a tela.
                            - `.nui-hidden { display: none !important; }`: Esta classe √© a "chave liga/desliga" da sua interface. Quando ela est√° aplicada, o elemento simplesmente desaparece da tela. O `!important` for√ßa essa regra a ter prioridade.
                            - `#container { ... }`: Aqui estilizamos o nosso principal bloco `div` com `id="container"`.
                                - `background: rgba(44, 62, 80, 0.9);`: Um fundo escuro semi-transparente. O `0.9` √© a opacidade (qu√£o transparente √©).
                                - `padding`, `border-radius`, `box-shadow`, `max-width`, `width`, `border`: S√£o propriedades para controlar o espa√ßamento interno, arredondar cantos, adicionar sombra, e controlar a largura de forma responsiva.
                                - `transform: translateY(20px); opacity: 0; transition: ...;`: Essas linhas s√£o para criar uma **anima√ß√£o suave**! A interface come√ßa um pouco para baixo (`translateY(20px)`) e invis√≠vel (`opacity: 0`), e a `transition` diz que qualquer mudan√ßa nessas propriedades ser√° animada em 0.5 segundos.
                            - `#container.is-visible { ... }`: Quando o JavaScript adiciona a classe `is-visible` ao `#container`, essas regras s√£o aplicadas:
                                - `transform: translateY(0); opacity: 1;`: A interface volta para a posi√ß√£o normal e fica totalmente vis√≠vel, com a anima√ß√£o suave.
                            - `button { ... }`, `button:hover { ... }`, `button:active { ... }`: Estilos b√°sicos para os bot√µes. O `:hover` √© para quando o mouse passa por cima, e `:active` √© para quando o bot√£o est√° sendo clicado.
                        </p>
                        <p class="mt-4 text-gray-600">Com o CSS, nossa tela j√° tem um visual profissional! Agora, vamos faz√™-la reagir aos cliques do jogador com JavaScript.</p>
                    </article>
                    
                    <article id="s5_3" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">5.3 Interatividade com JavaScript (`script.js`): A Intelig√™ncia da Sua Tela</h3>
                        <p class="mb-4 text-gray-600">O `script.js` √© onde a m√°gica da intera√ß√£o acontece. Ele √© o "ouvido" e a "voz" da sua NUI. Ele ouve o que o `client.lua` manda, mostra/esconde a tela, e tamb√©m ouve o que o jogador faz (como cliques em bot√µes) para mandar de volta para o `client.lua`.</p>
                         <div class="code-block">
                            <pre><code class="language-javascript">document.addEventListener('DOMContentLoaded', function() {
    // Pegamos os elementos HTML pelos seus IDs para poder mexer neles com JavaScript.
    const container = document.getElementById('container');
    const btnInteragir = document.getElementById('btnInteragir');
    const btnClose = document.getElementById('btnClose');
    const mensagemFeedbackDiv = document.getElementById('mensagemFeedback');

    // Fun√ß√£o para mostrar a NUI com a anima√ß√£o suave (adiciona a classe 'is-visible').
    function mostrarNUI() {
        container.classList.remove('nui-hidden'); // Remove a classe que esconde o elemento
        // Pequeno atraso para garantir que o CSS entenda que a classe foi removida antes de adicionar a pr√≥xima.
        setTimeout(() => container.classList.add('is-visible'), 10); 
        mensagemFeedbackDiv.textContent = ''; // Limpa qualquer mensagem antiga ao abrir a NUI.
    }

    // Fun√ß√£o para esconder a NUI com a anima√ß√£o suave (remove a classe 'is-visible' e adiciona 'nui-hidden').
    function esconderNUI() {
        container.classList.remove('is-visible'); // Remove a classe que ativa a anima√ß√£o
        // Espera um pouco (500ms) para a anima√ß√£o de sa√≠da terminar antes de esconder totalmente o elemento.
        setTimeout(() => container.classList.add('nui-hidden'), 500); 
    }

    // Este √© o 'ouvinte' principal! Ele espera por mensagens que v√™m do Lua (do client.lua).
    // As mensagens s√£o enviadas pelo Lua usando SendNUIMessage().
    window.addEventListener('message', function(evento) {
        const dadosRecebidos = evento.data; // A mensagem que o Lua enviou est√° aqui!

        if (dadosRecebidos.acao === 'mostrar') {
            mostrarNUI(); // Se a a√ß√£o √© 'mostrar', chamamos nossa fun√ß√£o para exibir a NUI.
        } else if (dadosRecebidos.acao === 'esconder') {
            esconderNUI(); // Se a a√ß√£o √© 'esconder', chamamos nossa fun√ß√£o para ocultar a NUI.
        } else if (dadosRecebidos.acao === 'atualizarFeedback') {
            // Se o Lua quer atualizar uma mensagem na tela, ele envia esta a√ß√£o.
            mensagemFeedbackDiv.textContent = dadosRecebidos.mensagem; // Atualiza o texto.
            mensagemFeedbackDiv.style.color = dadosRecebidos.cor || '#fff'; // Define a cor, se enviada.
        }
    });

    // Adiciona um 'ouvinte de clique' ao bot√£o 'btnInteragir'.
    btnInteragir.addEventListener('click', function() {
        // Quando o bot√£o √© clicado, enviamos uma mensagem para o Lua (client.lua) usando fetch().
        // A URL √© constru√≠da com o nome do seu recurso e o nome do 'callback' (cliqueDoBotao) que o Lua est√° esperando.
        fetch(`https://${GetParentResourceName()}/cliqueDoBotao`, {
            method: 'POST', // Usamos POST para enviar dados ou dizer ao Lua para fazer algo.
            headers: {
                'Content-Type': 'application/json; charset=UTF-8' // Diz ao Lua que estamos enviando JSON.
            },
            // Converte o objeto JavaScript em uma string JSON para enviar ao Lua.
            body: JSON.stringify({ 
                idDoBotao: 'btnInteragir', 
                valorAleatorio: Math.random() // Um exemplo de dado que podemos enviar.
            }) 
        })
        .then(resposta => resposta.json()) // Espera que a resposta do Lua seja JSON e a converte.
        .then(dadosDoLua => {
            // 'dadosDoLua' √© a resposta que o Lua enviou de volta (pela 'funcaoResposta').
            console.log('Lua respondeu:', dadosDoLua); // Exibe no console do navegador (F12).
            mensagemFeedbackDiv.textContent = `Lua respondeu: "${dadosDoLua.status}"`; // Mostra na tela.
            mensagemFeedbackDiv.style.color = '#a7f3d0'; // Cor verde para sucesso.
        })
        .catch(erro => {
            // Se algo der errado na comunica√ß√£o, isso ser√° capturado aqui.
            console.error('Erro ao enviar mensagem para Lua:', erro);
            mensagemFeedbackDiv.textContent = 'Erro ao se comunicar com o back-end.';
            mensagemFeedbackDiv.style.color = '#f87171'; // Cor vermelha para erro.
        });
    });

    // Adiciona um 'ouvinte de clique' ao bot√£o 'btnClose'.
    btnClose.addEventListener('click', function() {
        // Envia uma mensagem para o Lua dizendo que a NUI quer ser fechada.
        fetch(`https://${GetParentResourceName()}/escape`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json; charset=UTF-8' },
            body: JSON.stringify({}) // N√£o precisamos enviar dados espec√≠ficos para fechar.
        });
    });

    // Opcional: Voc√™ pode adicionar um ouvinte para a tecla ESC aqui tamb√©m,
    // mas o client.lua j√° faz isso de forma mais robusta para o jogo.
    document.addEventListener('keydown', function(eventoTeclado) {
        if (eventoTeclado.key === 'Escape') {
            fetch(`https://${GetParentResourceName()}/escape`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json; charset=UTF-8' },
                body: JSON.stringify({})
            });
        }
    });
});
</code></pre>
                            <div class="explanation-area mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-gray-700 hidden">
                                <p class="font-semibold mb-2">Explica√ß√£o da API Gemini:</p>
                                <div class="explanation-content"></div>
                                <div class="loading-spinner text-center mt-2 hidden">
                                    <div class="animate-spin inline-block w-4 h-4 border-2 border-current border-t-transparent text-blue-600 rounded-full" role="status"></div>
                                    <span class="ml-2">Carregando explica√ß√£o...</span>
                                </div>
                            </div>
                        </div>
                        <p class="mt-4 text-gray-600">
                            <strong>Explica√ß√£o linha a linha do `script.js`:</strong><br>
                            - `document.addEventListener('DOMContentLoaded', function() { ... })`: **Sempre coloque seu c√≥digo JavaScript principal dentro disso!** Ele garante que todo o HTML da sua p√°gina j√° foi carregado e est√° pronto para ser manipulado pelo JavaScript. Se o JavaScript tentar mexer em algo que ainda n√£o existe no HTML, dar√° erro.
                            - `const container = document.getElementById('container');`: Pegamos o elemento HTML que tem o `id="container"` e guardamos ele em uma vari√°vel `container`. Agora podemos mexer nesse elemento pelo JavaScript! Fazemos o mesmo para os bot√µes e a div de feedback.
                            - `function mostrarNUI()` e `function esconderNUI()`: S√£o fun√ß√µes que criamos para controlar a visibilidade da interface. Elas adicionam ou removem as classes CSS (`nui-hidden` e `is-visible`) que definem se a tela aparece ou n√£o, ativando as anima√ß√µes que fizemos no CSS. O `setTimeout` √© para garantir que a anima√ß√£o seja ativada corretamente.
                            - `window.addEventListener('message', function(evento) { ... })`: **Essa √© a ponte do Lua para o NUI!** Este c√≥digo fica "ouvindo" por qualquer mensagem que o `client.lua` envia usando `SendNUIMessage()`.
                                - `const dadosRecebidos = evento.data;`: A mensagem que o Lua enviou (um objeto) vem dentro de `evento.data`.
                                - `if (dadosRecebidos.acao === 'mostrar') { ... }`: Verificamos qual "a√ß√£o" o Lua nos mandou. Se for `'mostrar'`, exibimos a NUI. Se for `'esconder'`, ocultamos. Se for `'atualizarFeedback'`, mostramos a mensagem.
                            - `btnInteragir.addEventListener('click', function() { ... })`: Adiciona um "ouvinte de clique" ao bot√£o "Interagir". Quando o jogador clica, o c√≥digo aqui dentro √© executado.
                                - `fetch(`https://${GetParentResourceName()}/cliqueDoBotao`, { ... })`: **Essa √© a ponte do NUI para o Lua!** √â como o JavaScript envia uma mensagem para o `client.lua`.
                                    - `https://${GetParentResourceName()}/`: `GetParentResourceName()` √© uma fun√ß√£o m√°gica do FiveM que te d√° o nome do seu recurso (ex: `meu_primeiro_recurso`). A URL √© constru√≠da para "chamar" um `callback` no Lua.
                                    - `/cliqueDoBotao`: √â o nome do `callback` que voc√™ registrou l√° no seu `client.lua` com `RegisterNUICallback('cliqueDoBotao', ...)`.
                                    - `method: 'POST'`: Diz que estamos enviando dados.
                                    - `headers: { 'Content-Type': 'application/json; charset=UTF8' }`: Informa que os dados que estamos enviando s√£o no formato JSON.
                                    - `body: JSON.stringify({ ... })`: **MUITA ATEN√á√ÉO AQUI!** Os dados que voc√™ quer enviar para o Lua (como o `idDoBotao` e `valorAleatorio`) devem ser um objeto JavaScript, e depois transformados em uma **string JSON** usando `JSON.stringify()`. O Lua vai receber isso como uma tabela.
                                - `.then(resposta => resposta.json())`: Depois que voc√™ envia a mensagem, o Lua pode mandar uma resposta de volta. Essa linha "espera" essa resposta e tenta convert√™-la de JSON para um objeto JavaScript.
                                - `.then(dadosDoLua => { ... })`: Uma vez que a resposta do Lua chega e √© convertida, este bloco √© executado. Voc√™ pode usar `dadosDoLua` para atualizar a tela ou fazer algo com o que o Lua te disse.
                                - `.catch(erro => { ... })`: Se acontecer algum problema na comunica√ß√£o, isso ser√° capturado aqui.
                                    - `console.error(...)`: Para depurar, use isso para ver mensagens de erro no console do navegador (voc√™ abre com F12).
                                    - `mensagemFeedbackDiv.textContent = 'Erro ao se comunicar com o back-end.';`: Mostra uma mensagem de erro para o usu√°rio na tela.
                            - `btnClose.addEventListener('click', ...)` e `document.addEventListener('keydown', ...)`: Semelhantes ao `btnInteragir`, mas feitos para fechar a NUI. Eles enviam uma mensagem para o callback `escape` no Lua, que por sua vez esconde a NUI.
                        </p>
                        <p class="mt-4 text-gray-600">Com este JavaScript, sua interface NUI est√° viva! Ela pode conversar com o jogo e com o servidor, permitindo que o jogador interaja e receba feedback de forma din√¢mica.</p>
                    </article>
                </section>

                <section id="s6" class="mb-16 scroll-mt-24">
                    <h2 class="text-4xl font-extrabold border-b border-blue-200 pb-4 mb-8 text-blue-800">6. Integra√ß√£o Completa: A Dan√ßa da Comunica√ß√£o</h2>
                    <p class="text-lg text-gray-700 leading-relaxed mb-8">Agora que voc√™ conhece as pe√ßas, vamos ver como elas se encaixam em uma "dan√ßa" perfeita de comunica√ß√£o. Esta se√ß√£o mostra o fluxo completo: como a interface aparece, como ela manda mensagens para o Lua e como recebe feedback, tudo em um exemplo pr√°tico e simplificado.</p>

                    <article id="s6_1" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">6.1 Abrindo e Fechando a Interface: O Palco e a Cortina</h3>
                        <p class="mb-4 text-gray-600">Para ter uma boa experi√™ncia de jogo, sua NUI n√£o pode ficar o tempo todo na tela. Ela deve aparecer quando o jogador precisa e sumir quando n√£o precisa mais. Veja o passo a passo de como isso acontece:</p>
                        <p class="font-bold mt-4 text-gray-800">Fluxo para Abrir a NUI:</p>
                        <ol class="list-decimal list-inside space-y-2 text-gray-700">
                            <li><strong>Jogador Ativa (No Jogo):</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>Voc√™ (o jogador) digita `/abrirtela` no chat do FiveM.</li>
                                    <li>O script `client.lua` "ouve" esse comando por causa do `RegisterCommand('abrirtela', ...)` que configuramos.</li>
                                </ul>
                            </li>
                            <li><strong>`client.lua` D√° o Sinal:</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>No `client.lua`, a fun√ß√£o `MostrarNUI()` √© chamada.</li>
                                    <li>Essa fun√ß√£o faz duas coisas importantes:
                                        <ul class="list-circle list-inside ml-6">
                                            <li>`SetNuiFocus(true, true)`: Diz ao FiveM: "Agora, o jogador vai interagir com a tela NUI. Mostre o cursor do mouse!". Isso √© como acender os refletores na NUI.</li>
                                            <li>`SendNUIMessage({ acao = 'mostrar' })`: Manda uma mensagem (um "sinal") para o JavaScript da sua NUI dizendo: "√â hora de aparecer!".</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li><strong>NUI (`script.js`) Aparece na Tela:</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>No `script.js` da sua NUI, o `window.addEventListener('message', ...)` que criamos "pega" o sinal `{ acao = 'mostrar' }` que veio do Lua.</li>
                                    <li>O JavaScript ent√£o chama a fun√ß√£o `mostrarNUI()` (do lado do JS), que remove a classe `nui-hidden` (e adiciona `is-visible`) do seu cont√™iner principal (`#container`).</li>
                                    <li>Pronto! Sua interface HTML aparece na tela do jogador, com a anima√ß√£o suave que configuramos no CSS.</li>
                                </ul>
                            </li>
                        </ol>
                        <p class="font-bold mt-6 text-gray-800">Fluxo para Fechar a NUI:</p>
                        <ol class="list-decimal list-inside space-y-2 text-gray-700">
                            <li><strong>Jogador Ativa (No Jogo ou NUI):</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li><strong>Op√ß√£o 1: Pressiona ESC (no jogo):</strong> Nosso `Citizen.CreateThread` no `client.lua` est√° sempre de olho se o jogador soltou a tecla ESC. Se sim, ele chama `EsconderNUI()`.</li>
                                    <li><strong>Op√ß√£o 2: Clica no Bot√£o "Fechar" (na NUI):</strong> O jogador clica no bot√£o "Fechar NUI" na sua interface. O `script.js` ouve esse clique e faz uma requisi√ß√£o `fetch` para o `client.lua` no `callback 'escape'`.</li>
                                </ul>
                            </li>
                            <li><strong>`client.lua` D√° o Sinal de Despedida:</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>Seja qual for a op√ß√£o de fechamento (ESC ou bot√£o), a fun√ß√£o `EsconderNUI()` no `client.lua` √© chamada.</li>
                                    <li>Essa fun√ß√£o faz o inverso:
                                        <ul class="list-circle list-inside ml-6">
                                            <li>`SetNuiFocus(false, false)`: Devolve o controle do jogo para o jogador e esconde o cursor do mouse. A NUI "sai de cena".</li>
                                            <li>`SendNUIMessage({ acao = 'esconder' })`: Manda um sinal para o JavaScript da sua NUI dizendo: "√â hora de sumir!".</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li><strong>NUI (`script.js`) Desaparece da Tela:</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>O `window.addEventListener('message', ...)` no `script.js` pega o sinal `{ acao = 'esconder' }`.</li>
                                    <li>O JavaScript ent√£o chama a fun√ß√£o `esconderNUI()` (do lado do JS), que remove a classe `is-visible` e adiciona de volta a `nui-hidden` ao seu cont√™iner `#container`.</li>
                                    <li>Sua interface HTML desaparece suavemente da tela.</li>
                                </ul>
                            </li>
                        </ol>
                        <p class="mt-4 text-gray-600">Essa coreografia entre o Lua e o JavaScript garante que sua NUI apare√ßa e desapare√ßa de forma suave e controlada, proporcionando uma √≥tima experi√™ncia ao jogador!</p>
                    </article>

                    <article id="s6_2" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">6.2 Enviando e Recebendo Mensagens: O Telefone entre Front e Back</h3>
                        <p class="mb-4 text-gray-600">A verdadeira m√°gica da NUI est√° na troca de mensagens entre sua interface web e o c√≥digo Lua. √â como ter um telefone direto para a l√≥gica do jogo! Vamos ver como funciona essa comunica√ß√£o de m√£o dupla.</p>
                        
                        <p class="font-bold mt-4 text-gray-800">Enviando do Front-end (NUI - JavaScript) para o Back-end (Lua do Cliente):</p>
                        <p class="mb-2 text-gray-600">Imagine que o jogador clica em um bot√£o na sua NUI para "comprar" algo. Voc√™ precisa avisar o Lua sobre isso.</p>
                        <ol class="list-decimal list-inside space-y-2 text-gray-700">
                            <li><strong>A√ß√£o na NUI (JavaScript):</strong> O jogador clica no bot√£o "Interagir com o Back-end" na sua tela NUI.
                                <ul class="list-disc list-inside ml-4">
                                    <li>No `script.js`, o `btnInteragir.addEventListener('click', ...)` detecta o clique.</li>
                                    <li>Ele dispara uma requisi√ß√£o `fetch` para o `client.lua`. O endere√ßo da requisi√ß√£o √© `https://SEU_RECURSO/cliqueDoBotao`.</li>
                                    <li>No `body` da requisi√ß√£o, voc√™ envia um objeto JavaScript (convertido para JSON) com os detalhes do clique, tipo `{ idDoBotao: 'btnInteragir', valorAleatorio: 0.75 }`.</li>
                                </ul>
                            </li>
                            <li><strong>`client.lua` Recebe a Mensagem:</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>No `client.lua`, o `RegisterNUICallback('cliqueDoBotao', ...)` est√° "escutando" por essa requisi√ß√£o.</li>
                                    <li>Quando a requisi√ß√£o chega, a fun√ß√£o dentro do `RegisterNUICallback` √© executada, e a vari√°vel `dadosRecebidos` cont√©m as informa√ß√µes que o JavaScript enviou.</li>
                                    <li>Aqui, o Lua pode imprimir no console (`print`) e decidir o que fazer com os dados. Se for algo que precisa de seguran√ßa ou afetar outros jogadores, ele "passa a bola" para o servidor: `TriggerServerEvent('meuRecurso:fazerAlgoNoServidor', dadosRecebidos)`.</li>
                                    <li>Por fim, o `client.lua` pode enviar uma resposta de volta para a NUI usando a fun√ß√£o `funcaoResposta({ status: 'ok', mensagem: 'Recebido!' })`.</li>
                                </ul>
                            </li>
                            <li><strong>NUI (`script.js`) Recebe o Feedback:</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>A parte `.then(dadosDoLua => ...)` da sua requisi√ß√£o `fetch` no `script.js` recebe a resposta que veio do Lua (`{ status: 'ok', mensagem: 'Recebido!' }`).</li>
                                    <li>O JavaScript pode ent√£o atualizar a tela (ex: a div `mensagemFeedbackDiv`) para avisar o jogador que a a√ß√£o foi processada.</li>
                                </ul>
                            </li>
                        </ol>
                        <p class="font-bold mt-6 text-gray-800">Enviando do Back-end (Lua do Cliente) para o Front-end (NUI - JavaScript):</p>
                        <p class="mb-2 text-gray-600">Agora, imagine que o Lua quer mostrar uma informa√ß√£o nova na tela do jogador, tipo o saldo banc√°rio ou um aviso.</p>
                        <ol class="list-decimal list-inside space-y-2 text-gray-700">
                            <li><strong>Evento no `client.lua` (ou Servidor):</strong> O Lua tem uma informa√ß√£o nova para a NUI.
                                <ul class="list-disc list-inside ml-4">
                                    <li>No `client.lua`, voc√™ usa `SendNUIMessage({ acao = 'atualizarFeedback', mensagem: 'Saldo: $1500', cor: '#00FF00' })`. Essa mensagem vai direto para o JavaScript da NUI.</li>
                                    <li>(Opcional) Se a informa√ß√£o vem do `server.lua` (ex: banco de dados), o servidor primeiro manda para o `client.lua` do jogador (`TriggerClientEvent`), e s√≥ ent√£o o `client.lua` manda para a NUI.</li>
                                </ul>
                            </li>
                            <li><strong>NUI (`script.js`) Recebe a Mensagem e Atualiza:</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>O `window.addEventListener('message', ...)` no `script.js` da NUI "pega" essa nova mensagem.</li>
                                    <li>O JavaScript verifica a `acao` da mensagem (no caso, `'atualizarFeedback'`) e usa os `dadosRecebidos` (a `mensagem` e a `cor`) para atualizar a `mensagemFeedbackDiv` na tela.</li>
                                </ul>
                            </li>
                        </ol>
                        <p class="mt-4 text-gray-600">Essa capacidade de enviar e receber mensagens de forma bidirecional √© o que torna suas interfaces NUI poderosas e din√¢micas, criando uma experi√™ncia imersiva para o jogador!</p>
                    </article>

                    <article id="s6_3" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">6.3 Exemplo Pr√°tico: Sua Primeira Intera√ß√£o Completa!</h3>
                        <p class="mb-4 text-gray-600">Vamos juntar tudo o que aprendemos em um cen√°rio simples, mas completo! Imagine a seguinte hist√≥ria: o jogador abre a tela NUI, clica em um bot√£o, o servidor processa algo, e o jogador recebe um aviso de volta na tela.</p>
                        <p class="font-bold mt-4 text-gray-800">Cen√°rio da M√°gica:</p>
                        <ol class="list-decimal list-inside space-y-3 text-gray-700">
                            <li><strong>Voc√™ (Jogador) Abre a Tela:</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>No chat do FiveM, voc√™ digita: `/abrirtela`.</li>
                                    <li>**No `client.lua`:** O `RegisterCommand('abrirtela', ...)` √© acionado, e a fun√ß√£o `MostrarNUI()` √© chamada.</li>
                                    <li>**No `client.lua`:** `SetNuiFocus(true, true)` ativa o foco na NUI e mostra seu mouse.</li>
                                    <li>**No `client.lua`:** `SendNUIMessage({ acao = 'mostrar' })` envia o "sinal" para o JavaScript.</li>
                                    <li>**Na NUI (`script.js`):** O `window.addEventListener('message', ...)` recebe o sinal. A fun√ß√£o `mostrarNUI()` no JS √© chamada, e a sua interface `#container` aparece na tela com uma anima√ß√£o suave.</li>
                                </ul>
                            </li>
                            <li><strong>Voc√™ Clica no Bot√£o "Interagir":</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>Na tela NUI, voc√™ clica no bot√£o "Interagir com o Back-end".</li>
                                    <li>**Na NUI (`script.js`):** O `btnInteragir.addEventListener('click', ...)` detecta o clique.</li>
                                    <li>**Na NUI (`script.js`):** Uma requisi√ß√£o `fetch` √© feita para `https://SEU_RECURSO/cliqueDoBotao`, enviando um JSON com o `idDoBotao`.</li>
                                </ul>
                            </li>
                            <li><strong>`client.lua` Recebe e Manda para o Servidor:</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>**No `client.lua`:** O `RegisterNUICallback('cliqueDoBotao', ...)` √© ativado. Ele recebe os dados que voc√™ clicou (o `idDoBotao`).</li>
                                    <li>**No `client.lua`:** Ele pode imprimir uma mensagem para voc√™ ver no console (`F8`).</li>
                                    <li>**No `client.lua`:** Para a a√ß√£o ser processada de forma segura, ele "passa a bola" para o servidor: `TriggerServerEvent('meuRecurso:fazerAlgoNoServidor', dadosDoBotao)`.</li>
                                </ul>
                            </li>
                            <li><strong>`server.lua` Processa e Responde:</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>**No `server.lua`:** O `RegisterNetEvent('meuRecurso:fazerAlgoNoServidor')` e seu `AddEventHandler` s√£o acionados.</li>
                                    <li>**No `server.lua`:** Ele recebe os dados do clique e o `jogadorID` (quem clicou). Aqui, ele simula dar "√°gua" ao jogador (no seu c√≥digo real, voc√™ faria a l√≥gica de verdade, como checar permiss√£o e dar itens via QBcore).</li>
                                    <li>**No `server.lua`:** Ele envia uma mensagem de feedback para o chat do jogador: `TriggerClientEvent('chat:addMessage', jogadorID, { ... })`.</li>
                                </ul>
                            </li>
                            <li><strong>`client.lua` e NUI Recebem Feedback:</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>**No `client.lua`:** A mensagem de chat que o servidor enviou √© recebida (e aparecer√° no chat do jogo).</li>
                                    <li>**Na NUI (`script.js`):** A resposta da fun√ß√£o `funcaoResposta('ok')` (do `RegisterNUICallback` no passo 3) volta para a requisi√ß√£o `fetch`.</li>
                                    <li>**Na NUI (`script.js`):** A parte `.then(dadosDoLua => ...)` √© ativada. O JavaScript ent√£o atualiza a `mensagemFeedbackDiv` na tela da NUI para dizer "Lua respondeu: ok".</li>
                                </ul>
                            </li>
                            <li><strong>Voc√™ Fecha a Tela:</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>Voc√™ aperta `ESC` ou clica no bot√£o "Fechar NUI".</li>
                                    <li>**No `client.lua`:** O `Citizen.CreateThread` ou o `RegisterNUICallback('escape', ...)` √© acionado e chama `EsconderNUI()`.</li>
                                    <li>**No `client.lua`:** `SetNuiFocus(false, false)` devolve o controle do jogo.</li>
                                    <li>**No `client.lua`:** `SendNUIMessage({ acao = 'esconder' })` envia o sinal para o JS.</li>
                                    <li>**Na NUI (`script.js`):** O `window.addEventListener('message', ...)` recebe o sinal. A fun√ß√£o `esconderNUI()` no JS √© chamada, e a tela desaparece suavemente.</li>
                                </ul>
                            </li>
                        </ol>
                        <p class="mt-4 text-gray-600">Este √© o ciclo completo! Cada parte trabalhando junto para criar uma experi√™ncia interativa. Parab√©ns, voc√™ acabou de entender sua primeira grande integra√ß√£o front-end e back-end no FiveM!</p>
                    </article>
                </section>

                <section id="s7" class="mb-16 scroll-mt-24">
                    <h2 class="text-4xl font-extrabold border-b border-blue-200 pb-4 mb-8 text-blue-800">7. Avan√ßando o Projeto: De Iniciante a Construtor</h2>
                    <p class="text-lg text-gray-700 leading-relaxed mb-8">Com o b√°sico dominado, √© hora de ir al√©m! Nesta se√ß√£o, vamos ver como deixar seus scripts mais seguros, organizados e prontos para funcionalidades mais avan√ßadas. Pense nisso como subir de n√≠vel no seu desenvolvimento!</p>

                    <article id="s7_1" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">7.1 Valida√ß√£o e Seguran√ßa: Protegendo sua Cria√ß√£o</h3>
                        <p class="mb-4 text-gray-600">Imagine que voc√™ est√° construindo uma casa e algu√©m tenta entrar pela janela sem permiss√£o. No desenvolvimento de scripts, isso √© um "exploit"! **A seguran√ßa √© a coisa mais importante.** Nunca confie em informa√ß√µes que v√™m diretamente do computador do jogador (cliente) ou da sua interface NUI, pois elas podem ser facilmente alteradas por algu√©m mal-intencionado.</p>
                        <p class="mb-4 text-gray-600">A regra de ouro, que voc√™ deve gravar: **"Tudo o que √© importante e precisa ser seguro, valide no Servidor!"**</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Valida√ß√£o no Servidor (`server.lua`): O Guarda Costas</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>Sempre, sempre, sempre verifique e "limpe" os dados que voc√™ recebe do cliente (seja da NUI via `client.lua`, ou de um `TriggerServerEvent`).</li>
                                    <li>**Exemplos Pr√°ticos:**
                                        <ul class="list-circle list-inside ml-6">
                                            <li>Se a NUI envia uma quantia de dinheiro para o jogador "sacar", o `server.lua` DEVE verificar se o jogador realmente TEM aquele dinheiro antes de tir√°-lo.</li>
                                            <li>Se o cliente pede para dar um item, o servidor precisa checar se o item existe, se a quantidade √© v√°lida (n√£o negativa, por exemplo) e se o jogador tem permiss√£o para receber aquele item de tal forma.</li>
                                            <li>Use fun√ß√µes como `type()` (para ver se √© n√∫mero, string, etc.), compare valores (`>` ou `<`), e, para textos, aprenda sobre saneamento para evitar "inje√ß√£o" de c√≥digo malicioso.</li>
                                        </ul>
                                    </li>
                                    <li>**Permiss√µes:** Se voc√™ tiver fun√ß√µes que s√≥ administradores podem usar (tipo banir algu√©m), use um sistema de permiss√µes (o QBcore j√° tem um!) no `server.lua` para ter certeza que s√≥ quem pode, usa.</li>
                                </ul>
                            </li>
                            <li><strong>Valida√ß√£o no Front-end (NUI - JavaScript): O Atendente Educado</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>A valida√ß√£o aqui N√ÉO √© para seguran√ßa, mas para melhorar a experi√™ncia do jogador. Ela serve para dar um aviso r√°pido ao jogador se ele digitar algo errado *antes* de enviar para o servidor.</li>
                                    <li>Exemplo: Se um campo pede um n√∫mero e o jogador digita letras, o JavaScript pode avisar na hora: "Por favor, digite apenas n√∫meros!".</li>
                                    <li>Use valida√ß√µes HTML5 (`<input type="number" required>`) e JavaScript para checar campos (`input.value === ''` para campo vazio, `isNaN(value)` para ver se n√£o √© n√∫mero).</li>
                                </ul>
                            </li>
                        </ul>
                        <p class="mt-4 text-gray-600">Pense como um detetive: como algu√©m tentaria "trapacear" meu script? E ent√£o, construa defesas no servidor para isso. Seguran√ßa √© uma prioridade, n√£o um extra!</p>
                    </article>

                    <article id="s7_2" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">7.2 Modulariza√ß√£o do C√≥digo: Organizanto seu Projeto Grande</h3>
                        <p class="mb-4 text-gray-600">Quando seu script come√ßa a crescer, ter tudo em um √∫nico `client.lua` ou `server.lua` vira uma bagun√ßa! A **modulariza√ß√£o** √© como dividir uma casa em c√¥modos: cada c√¥modo (arquivo) tem sua fun√ß√£o e √© mais f√°cil de arrumar. Isso torna seu c√≥digo mais limpo, f√°cil de entender e de dar manuten√ß√£o.</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Dividindo por Funcionalidade:</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>Crie arquivos Lua menores para cada tipo de l√≥gica. Por exemplo:
                                        <ul class="list-circle list-inside ml-6">
                                            <li>No lado do cliente: um arquivo para cuidar da NUI (`client_nui.lua`), outro para eventos do jogo (`client_events.lua`), etc.</li>
                                            <li>No lado do servidor: um arquivo para mexer com o banco de dados (`server_database.lua`), outro para a l√≥gica principal (`server_main.lua`), etc.</li>
                                        </ul>
                                    </li>
                                    <li>Sua estrutura de pastas pode ficar assim:
                                    <div class="bg-gray-800 text-white p-6 rounded-xl font-mono text-base shadow-lg mt-4">
                                        <div class="flex items-center">
                                            <span class="mr-2 text-yellow-300">üìÅ</span><span>meu_recurso/</span>
                                        </div>
                                        <div class="pl-8 border-l-2 border-gray-700 ml-4 mt-2">
                                            <div class="flex items-center mt-2">
                                                <span class="mr-2 text-yellow-300">üìÑ</span><span class="text-yellow-400">fxmanifest.lua</span>
                                            </div>
                                            <div class="flex items-center mt-2">
                                                <span class="mr-2 text-yellow-300">üìÅ</span><span>client/</span> <span class="text-gray-400 ml-2">// Pasta para scripts do cliente</span>
                                            </div>
                                            <div class="pl-8 border-l-2 border-gray-700 ml-4 mt-2">
                                                <div class="flex items-center mt-2">
                                                    <span class="mr-2 text-yellow-300">üìÑ</span><span class="text-blue-400">main.lua</span> <span class="text-gray-400 ml-2">// L√≥gica principal de inicializa√ß√£o do cliente</span>
                                                </div>
                                                <div class="flex items-center mt-2">
                                                    <span class="mr-2 text-yellow-300">üìÑ</span><span class="text-blue-400">nui_handler.lua</span> <span class="text-gray-400 ml-2">// Fun√ß√µes de MostrarNUI, EsconderNUI, RegisterNUICallback</span>
                                                </div>
                                            </div>
                                            <div class="flex items-center mt-2">
                                                <span class="mr-2 text-yellow-300">üìÅ</span><span>server/</span> <span class="text-gray-400 ml-2">// Pasta para scripts do servidor</span>
                                            </div>
                                            <div class="pl-8 border-l-2 border-gray-700 ml-4 mt-2">
                                                <div class="flex items-center mt-2">
                                                    <span class="mr-2 text-yellow-300">üìÑ</span><span class="text-green-400">main.lua</span> <span class="text-gray-400 ml-2">// L√≥gica principal de inicializa√ß√£o do servidor</span>
                                                </div>
                                                <div class="flex items-center mt-2">
                                                    <span class="mr-2 text-yellow-300">üìÑ</span><span class="text-green-400">database.lua</span> <span class="text-gray-400 ml-2">// Fun√ß√µes para interagir com o banco de dados</span>
                                                </div>
                                            </div>
                                            <div class="flex items-center mt-2">
                                                <span class="mr-2 text-yellow-300">üìÅ</span><span>html/</span> <span class="text-gray-400 ml-2">// Sua pasta NUI (como antes)</span>
                                            </div>
                                            <div class="flex items-center mt-2">
                                                <span class="mr-2 text-yellow-300">üìÑ</span><span class="text-purple-400">shared.lua</span> <span class="text-gray-400 ml-2">// Coisas que cliente E servidor precisam saber</span>
                                            </div>
                                        </div>
                                    </div>
                                    </li>
                                    <li>E no seu `fxmanifest.lua`, voc√™ diria ao FiveM para carregar esses arquivos assim:
<div class="code-block mt-4">
    <pre><code class="language-lua">-- ... (outras configura√ß√µes)

client_scripts {
    'client/main.lua',
    'client/nui_handler.lua'
}
server_scripts {
    'server/main.lua',
    'server/database.lua'
}
shared_script 'shared.lua'

-- ... (outras configura√ß√µes de NUI e files)
</code></pre>
                            <div class="explanation-area mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-gray-700 hidden">
                                <p class="font-semibold mb-2">Explica√ß√£o da API Gemini:</p>
                                <div class="explanation-content"></div>
                                <div class="loading-spinner text-center mt-2 hidden">
                                    <div class="animate-spin inline-block w-4 h-4 border-2 border-current border-t-transparent text-blue-600 rounded-full" role="status"></div>
                                    <span class="ml-2">Carregando explica√ß√£o...</span>
                                </div>
                            </div>
</div>
                                    </li>
                                </ul>
                            </li>
                            <li><strong>Uso de `shared.lua` (`shared_script`):</strong> Se voc√™ tem vari√°veis ou fun√ß√µes que precisam ser acessadas tanto pelo `client.lua` quanto pelo `server.lua` (como configura√ß√µes gerais do seu recurso, nomes de eventos, ou constantes), crie um arquivo `shared.lua` e liste-o como `shared_script` no `fxmanifest.lua`. Isso evita repetir c√≥digo!</li>
                        </ul>
                        <p class="mt-4 text-gray-600">Com a modulariza√ß√£o, seu c√≥digo fica organizado, f√°cil de encontrar e de trabalhar, principalmente se voc√™ for adicionar mais funcionalidades ou se outras pessoas forem ajudar no seu projeto!</p>
                    </article>

                    <article id="s7_3" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">7.3 Depura√ß√£o e Logging: O Detetive de C√≥digos</h3>
                        <p class="mb-4 text-gray-600">Ningu√©m acerta de primeira! Erros (ou "bugs") s√£o parte normal do desenvolvimento. A "depura√ß√£o" √© o processo de encontrar e consertar esses erros. E o "logging" (registrar mensagens) √© a sua melhor ferramenta para isso!</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>No Lado do Lua (`client.lua` e `server.lua`):</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>`print()`: Seu superpoder! Use `print('Ol√°, estou aqui!')` para mostrar mensagens no console.
                                        <ul class="list-circle list-inside ml-6">
                                            <li>Para ver os prints do `client.lua` e erros da NUI, abra o console do FiveM no jogo (geralmente apertando `F8`).</li>
                                            <li>Para ver os prints do `server.lua` e erros do servidor, olhe o console da janela do seu FXServer.</li>
                                        </ul>
                                    </li>
                                    <li><strong>Cores no Console:</strong> Use c√≥digos de cor com `print()` para deixar suas mensagens mais f√°ceis de ler:
                                        <ul class="list-circle list-inside ml-6">
                                            <li>`print('^1ERRO: ^0Algo deu errado!')` (vermelho)</li>
                                            <li>`print('^2SUCESSO: ^0Item adicionado!')` (verde)</li>
                                            <li>`print('^3AVISO: ^0Verifique a conex√£o.')` (amarelo)</li>
                                            <li>`^0` volta √† cor padr√£o (branco).</li>
                                        </ul>
                                    </li>
                                    <li><strong>Comandos √öteis:</strong> No console do jogo (`F8`):
                                        <ul class="list-circle list-inside ml-6">
                                            <li>`refresh`: Recarrega *todos* os recursos. √ötil para aplicar mudan√ßas r√°pidas.</li>
                                            <li>`restart meu_recurso`: Recarrega *apenas* o seu recurso. Mais r√°pido e focado.</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li><strong>No Lado do Front-end (NUI - JavaScript e CSS):</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>`console.log()`: A vers√£o JavaScript do `print()`. Use-o no seu `script.js`.
<div class="code-block mt-4">
    <pre><code class="language-javascript">console.log('NUI: Bot√£o foi clicado!');
console.error('NUI ERRO: N√£o foi poss√≠vel enviar a mensagem para o Lua.');
console.warn('NUI AVISO: Dados incompletos.');
</code></pre>
                            <div class="explanation-area mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-gray-700 hidden">
                                <p class="font-semibold mb-2">Explica√ß√£o da API Gemini:</p>
                                <div class="explanation-content"></div>
                                <div class="loading-spinner text-center mt-2 hidden">
                                    <div class="animate-spin inline-block w-4 h-4 border-2 border-current border-t-transparent text-blue-600 rounded-full" role="status"></div>
                                    <span class="ml-2">Carregando explica√ß√£o...</span>
                                </div>
                            </div>
</div>
                                    </li>
                                    <li><strong>Ferramentas de Desenvolvedor do Navegador:</strong> A ferramenta mais poderosa para sua NUI!
                                        <ul class="list-circle list-inside ml-6">
                                            <li>Quando sua NUI estiver aberta no jogo, geralmente voc√™ pode apertar `F12` para abrir as ferramentas de desenvolvedor.</li>
                                            <li>**Aba "Console":** Veja todos os seus `console.log`, `error`, `warn` e erros de JavaScript.</li>
                                            <li>**Aba "Elements":** Permite inspecionar (ver e at√© mudar na hora) o HTML e CSS da sua NUI. √ìtimo para testar estilos!</li>
                                            <li>**Aba "Network":** Mostra todas as requisi√ß√µes `fetch` que sua NUI envia para o Lua e as respostas que ela recebe. Voc√™ v√™ se deu erro, o que foi enviado e o que voltou.</li>
                                            <li>**Aba "Sources":** Permite colocar "breakpoints" no seu JavaScript para pausar o c√≥digo e ver o valor das vari√°veis passo a passo.</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                        <p class="mt-4 text-gray-600">Depurar √© uma arte! Quanto mais voc√™ praticar, mais r√°pido voc√™ vai encontrar e consertar os probleminhas do seu c√≥digo. N√£o desanime com os erros, eles s√£o seus professores!</p>
                    </article>

                    <article id="s7_4" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">7.4 Adicionando Funcionalidades Avan√ßadas: Indo Al√©m!</h3>
                        <p class="mb-4 text-gray-600">Voc√™ j√° tem o b√°sico da integra√ß√£o. Agora, vamos sonhar um pouco e ver o que mais voc√™ pode criar com esse conhecimento! Essas s√£o funcionalidades mais avan√ßadas que voc√™ pode explorar no futuro:</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Conectando com Bancos de Dados:</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>Para guardar informa√ß√µes de forma permanente (tipo dinheiro do jogador, invent√°rio, propriedades), voc√™ precisa de um banco de dados. MySQL √© o mais usado no FiveM.</li>
                                    <li>**IMPORTANTE:** A comunica√ß√£o com o banco de dados √© feita **SOMENTE no `server.lua`**. Nunca coloque senhas ou informa√ß√µes de banco de dados no lado do cliente ou na NUI, pois elas seriam expostas!</li>
                                    <li>O `server.lua` vai receber o pedido do `client.lua` (que pode vir da NUI), vai conversar com o banco de dados (usando bibliotecas Lua como `mysql-async`), e depois vai enviar o resultado de volta para o `client.lua` para atualizar a NUI.</li>
                                </ul>
                            </li>
                            <li><strong>Menus e Telas Din√¢micas na NUI:</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>Em vez de ter menus que s√£o sempre iguais, voc√™ pode criar telas NUI que se preenchem sozinhas com informa√ß√µes que v√™m do servidor. Ex: uma loja que mostra os itens dispon√≠veis em tempo real, ou um painel de administra√ß√£o que lista os jogadores online.</li>
                                    <li>Para isso, o `server.lua` pegaria os dados (do banco de dados, por exemplo), enviaria para o `client.lua`, que por sua vez usaria `SendNUIMessage` para enviar para o JavaScript da NUI. O JavaScript ent√£o criaria os elementos HTML na hora para mostrar esses dados.</li>
                                    <li>Para interfaces muito complexas, voc√™ pode at√© usar frameworks JavaScript famosos como **React**, **Vue.js** ou **Svelte** dentro da sua NUI. Isso exige um pouco mais de configura√ß√£o (com ferramentas como Webpack ou Vite), mas deixa o desenvolvimento de interfaces complexas muito mais f√°cil e organizado.</li>
                                </ul>
                            </li>
                            <li><strong>Otimiza√ß√£o de Performance: Deixando o Jogo Fluido</strong>
                                <ul class="list-disc list-inside ml-4">
                                    <li>Scripts mal feitos podem deixar o servidor ou o jogo "pesado" (dar lag). Sempre que criar algo, pense em como deixar ele o mais eficiente poss√≠vel.</li>
                                    <li>**Lembre-se do `Citizen.Wait(0)`:** Nunca fa√ßa loops infinitos sem ele em `Citizen.CreateThread`, sen√£o seu script vai travar o jogo!</li>
                                    <li>**Minimize eventos de rede:** N√£o fique mandando mensagens entre cliente e servidor a cada milissegundo se n√£o for necess√°rio. Envie dados apenas quando houver uma mudan√ßa importante.</li>
                                    <li>**Queries de Banco de Dados:** Se for usar banco de dados, aprenda a fazer as "perguntas" (queries) de forma eficiente para n√£o sobrecarregar o servidor.</li>
                                </ul>
                            </li>
                        </ul>
                        <p class="mt-4 text-gray-600">Essas s√£o apenas algumas ideias. O mundo do desenvolvimento FiveM √© enorme, e com a base que voc√™ est√° construindo, as possibilidades s√£o infinitas!</p>
                    </article>
                </section>

                <section id="s8" class="mb-16 scroll-mt-24">
                    <h2 class="text-4xl font-extrabold border-b border-blue-200 pb-4 mb-8 text-blue-800">8. Recursos Adicionais: Onde Buscar Mais Conhecimento</h2>
                    <p class="text-lg text-gray-700 leading-relaxed mb-8">Nenhum curso √© o fim do aprendizado! Para continuar crescendo como desenvolvedor(a) de FiveM, √© essencial saber onde buscar mais informa√ß√µes, tirar d√∫vidas e se conectar com outras pessoas. Estes recursos ser√£o seus melhores amigos na jornada!</p>

                    <article id="s8_1" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">8.1 Links para a Documenta√ß√£o Oficial: Seu Manual de Refer√™ncia</h3>
                        <p class="mb-4 text-gray-600">A documenta√ß√£o oficial √© a fonte mais confi√°vel e completa de informa√ß√µes sobre o FiveM. Sempre que tiver uma d√∫vida sobre uma fun√ß√£o ou como algo funciona, consulte-a!</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Documenta√ß√£o FiveM (docs.fivem.net):</strong>
                                <ul class="list-circle list-inside ml-4">
                                    <li><a href="https://docs.fivem.net/" target="_blank" class="text-blue-600 hover:underline">P√°gina Principal da Documenta√ß√£o FiveM</a>: √â como a enciclop√©dia do FiveM. Tem informa√ß√µes sobre TUDO: as fun√ß√µes Lua para cliente e servidor, guias de como criar recursos, e explica√ß√µes sobre os conceitos gerais. **Guarde este link no seus favoritos!**</li>
                                    <li><a href="https://docs.fivem.net/docs/scripting-manual/nui/" target="_blank" class="text-blue-600 hover:underline">Guia da NUI (Native UI)</a>: A se√ß√£o espec√≠fica que explica como a NUI funciona em detalhes. Ela mostra as fun√ß√µes Lua que voc√™ usa para falar com a NUI (`SendNUIMessage`, `SetNuiFocus`) e como o JavaScript da NUI usa `fetch` para falar de volta com o Lua. Essencial para quem quer dominar a integra√ß√£o!</li>
                                </ul>
                            </li>
                            <li><strong>Documenta√ß√£o QBcore:</strong>
                                <ul class="list-circle list-inside ml-4">
                                    <li>Como o QBcore √© um framework, a documenta√ß√£o dele geralmente est√° no **reposit√≥rio oficial do QBcore no GitHub**. Procure por "qb-core framework FiveM GitHub". L√°, voc√™ encontrar√° uma se√ß√£o "Wiki" ou "Docs" que explica todas as fun√ß√µes e eventos espec√≠ficos do QBcore, como mexer com dinheiro, invent√°rio e dados do jogador.</li>
                                </ul>
                            </li>
                        </ul>
                    </article>

                    <article id="s8_2" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">8.2 F√≥runs e Comunidades: N√£o Programe Sozinho(a)!</h3>
                        <p class="mb-4 text-gray-600">Aprender com outras pessoas √© uma das melhores formas de crescer! F√≥runs e comunidades online s√£o √≥timos lugares para tirar d√∫vidas, compartilhar suas cria√ß√µes e se manter atualizado(a).</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>FiveM Forums:</strong>
                                <ul class="list-circle list-inside ml-4">
                                    <li><a href="https://forum.fivem.net/" target="_blank" class="text-blue-600 hover:underline">F√≥rum Oficial do FiveM</a>: √â o ponto de encontro principal de toda a comunidade. Voc√™ pode encontrar tutoriais, fazer perguntas, ver projetos que outras pessoas fizeram e participar de discuss√µes. N√£o tenha vergonha de perguntar, todo mundo j√° foi iniciante!</li>
                                </ul>
                            </li>
                            <li><strong>Servidores Discord:</strong>
                                <ul class="list-circle list-inside ml-4">
                                    <li>Muitos projetos grandes (como o QBcore), servidores famosos e grupos de desenvolvedores t√™m seus pr√≥prios servidores no Discord. L√°, voc√™ pode conseguir ajuda em tempo real, conversar sobre ideias e at√© encontrar parceiros para projetos. Procure por links de convite nos reposit√≥rios do GitHub ou nos pr√≥prios f√≥runs.</li>
                                </ul>
                            </li>
                        </ul>
                    </article>

                    <article id="s8_3" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">8.3 Exemplos de Outros Scripts e An√°lise de C√≥digo: Aprender com a Experi√™ncia Alheia</h3>
                        <p class="mb-4 text-gray-600">Uma das formas mais r√°pidas de aprender √© lendo o c√≥digo de outros desenvolvedores. √â como ter um mentor ensinando atrav√©s do que ele j√° criou!</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>GitHub:</strong>
                                <ul class="list-circle list-inside ml-4">
                                    <li>Use a busca do GitHub para encontrar exemplos de recursos FiveM. Tente pesquisar por "FiveM NUI examples", "QBcore scripts", ou "FiveM Lua". Voc√™ vai encontrar muitos projetos de c√≥digo aberto.</li>
                                    <li>Ao analisar o c√≥digo, preste aten√ß√£o em como eles organizam as pastas, como os eventos s√£o enviados e recebidos, como a NUI se comunica, e, principalmente, como eles fazem a valida√ß√£o de dados no lado do servidor para garantir a seguran√ßa.</li>
                                </ul>
                            </li>
                            <li><strong>An√°lise de Recursos Padr√£o:</strong>
                                <ul class="list-circle list-inside ml-4">
                                    <li>Baixe e explore o c√≥digo-fonte dos pr√≥prios recursos do QBcore (tipo `qb-inventory`, `qb-shops`). Eles s√£o √≥timos exemplos de como construir sistemas complexos de forma organizada e eficiente.</li>
                                </ul>
                            </li>
                            <li><strong>Compara√ß√£o de Abordagens:</strong>
                                <ul class="list-circle list-inside ml-4">
                                    <li>Voc√™ vai perceber que existem v√°rias maneiras de resolver o mesmo problema. Compare as diferentes abordagens, entenda os pontos fortes e fracos de cada uma, e decida qual se encaixa melhor no seu projeto. Isso vai te ajudar a desenvolver seu pr√≥prio estilo e a otimizar suas solu√ß√µes.</li>
                                </ul>
                            </li>
                        </ul>
                        <p class="mt-4 text-gray-600">Lembre-se: aprender a programar √© uma jornada cont√≠nua. Seja curioso(a), pratique bastante, e n√£o hesite em buscar e compartilhar conhecimento!</p>
                    </article>
                </section>

                <section id="s9" class="mb-16 scroll-mt-24">
                    <h2 class="text-4xl font-extrabold border-b border-blue-200 pb-4 mb-8 text-blue-800">9. Conclus√£o e Pr√≥ximos Passos: Seu Caminho Adiante!</h2>
                    <p class="text-lg text-gray-700 leading-relaxed mb-8">Parab√©ns! Voc√™ chegou ao final deste curso abrangente e did√°tico sobre a integra√ß√£o Front-end e Back-end para FiveM com QBcore e NUI. Voc√™ construiu uma base s√≥lida e agora tem o conhecimento necess√°rio para come√ßar a criar recursos interativos e incr√≠veis para o seu servidor!</p>
                    
                     <article id="s9_1" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">9.1 Resumo do Curso: O que Voc√™ Conquistou!</h3>
                        <p class="mb-4 text-gray-600">Vamos revisar rapidamente os superpoderes que voc√™ adquiriu:</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>A Grande Conversa:</strong> Voc√™ entendeu como o `client.lua`, `server.lua` e a NUI (HTML/CSS/JS) se comunicam usando eventos e callbacks.</li>
                            <li><strong>Ambiente Pronto:</strong> Voc√™ sabe como configurar o FXServer, integrar o QBcore e organizar as pastas do seu recurso.</li>
                            <li><strong>C√©rebro Lua:</strong> Voc√™ aprendeu a criar o `fxmanifest.lua` (o manual) e a escrever l√≥gica nos scripts `client.lua` (o ajudante) e `server.lua` (o gerente geral).</li>
                            <li><strong>Beleza Front-end:</strong> Voc√™ viu como criar a estrutura HTML (`index.html`), dar estilo com CSS (`style.css`) e adicionar a intelig√™ncia com JavaScript (`script.js`), fazendo a NUI interagir com o Lua.</li>
                            <li><strong>Fluxo de Intera√ß√£o Completo:</strong> Voc√™ acompanhou um exemplo pr√°tico de como uma a√ß√£o do jogador na NUI percorre todo o caminho at√© o servidor e volta com um feedback.</li>
                            <li><strong>Maneiras de Programar Bem:</strong> Voc√™ aprendeu a import√¢ncia da seguran√ßa (validar no servidor!), da organiza√ß√£o (modulariza√ß√£o) e como ser um detetive de erros (depura√ß√£o e logging).</li>
                            <li><strong>Caminhos para o Futuro:</strong> Exploramos para onde ir agora, com recursos oficiais e comunidades.</li>
                        </ul>
                        <p class="mt-4 text-gray-600">Voc√™ agora possui uma compreens√£o completa do fluxo de integra√ß√£o e das ferramentas necess√°rias para criar seus pr√≥prios recursos FiveM personalizados. O pr√≥ximo passo √© aplicar esse conhecimento!</p>
                    </article>
                    
                     <article id="s9_2" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">9.2 Desafios e Projetos Pr√°ticos: Coloque a M√£o na Massa!</h3>
                        <p class="mb-4 text-gray-600">Teoria √© importante, mas a pr√°tica √© essencial! Para realmente fixar o conhecimento, tente criar os seguintes projetos. N√£o se preocupe em fazer tudo perfeito, o importante √© come√ßar e experimentar! Voc√™ pode usar o bot√£o "Obter Dica ‚ú®" para uma ajudinha se ficar travado(a).</p>
                        <div class="mb-4">
                            <label for="challenge-select" class="block text-lg font-medium text-gray-700 mb-2">Escolha um desafio para obter uma dica ‚ú®:</label>
                            <select id="challenge-select" class="mt-1 block w-full pl-3 pr-10 py-3 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-lg rounded-lg shadow-sm">
                                <option value="">Selecione um desafio...</option>
                                <option value="Um menu de intera√ß√£o com o banco (verificar saldo, sacar, depositar), usando a API Gemini para explicar transa√ß√µes financeiras simples se o usu√°rio clicar em um bot√£o de "Ajuda".">Menu de Intera√ß√£o com o Banco</option>
                                <option value="Um sistema de notifica√ß√£o customizado que aparece na tela, com diferentes tipos de notifica√ß√µes (sucesso, erro, informa√ß√£o) e um sistema de fila. Use a API Gemini para gerar frases de notifica√ß√£o de exemplo baseadas no tipo.">Sistema de Notifica√ß√£o Customizado</option>
                                <option value="Um formul√°rio de feedback que envia a mensagem do jogador para um log no servidor, incluindo valida√ß√£o de input no front-end e tratamento de erros no back-end. Use a API Gemini para sugerir categorias de feedback baseadas no texto digitado pelo usu√°rio.">Formul√°rio de Feedback</option>
                                <option value="Um sistema de loja simples com itens din√¢micos. A NUI mostra os itens, e o servidor gerencia o invent√°rio e a compra/venda.">Sistema de Loja Simples</option>
                                <option value="Um painel de administra√ß√£o b√°sico com op√ß√µes para banir jogadores, dar itens ou teleportar. Tudo controlado pela NUI com valida√ß√µes rigorosas no servidor.">Painel de Administra√ß√£o B√°sico</option>
                            </select>
                            <button id="get-hint-button" class="mt-6 inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg shadow-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200 ease-in-out">
                                Obter Dica ‚ú®
                            </button>
                        </div>
                        <div id="hint-area" class="mt-6 p-5 bg-green-50 border border-green-200 rounded-lg text-base text-gray-700 shadow-md hidden">
                            <p class="font-bold mb-3 text-green-800">Dica da API Gemini:</p>
                            <div class="hint-content"></div>
                            <div class="loading-spinner text-center mt-3 hidden">
                                <div class="animate-spin inline-block w-5 h-5 border-3 border-current border-t-transparent text-green-600 rounded-full" role="status"></div>
                                <span class="ml-3">Carregando dica...</span>
                            </div>
                        </div>
                        <ul class="list-disc list-inside space-y-2 text-gray-700 mt-6">
                           <li>**Menu de Intera√ß√£o com o Banco:** Crie um menu onde o jogador pode verificar o saldo (obtendo dados do servidor), sacar e depositar dinheiro (enviando a quantia para o servidor para valida√ß√£o e atualiza√ß√£o do saldo).</li>
                           <li>**Sistema de Notifica√ß√£o Customizado:** Desenvolva um pop-up de notifica√ß√£o NUI que aparece no canto da tela quando o jogador recebe uma mensagem do servidor (ex: "Voc√™ recebeu um novo item!", "Seu ve√≠culo foi consertado!"). Implemente diferentes tipos de notifica√ß√£o (sucesso, erro, aviso).</li>
                           <li>**Formul√°rio de Feedback:** Crie uma interface NUI com um campo de texto e um bot√£o de "Enviar Feedback". Ao enviar, a mensagem deve ser processada no `client.lua` e depois enviada para o `server.lua` para ser registrada em um arquivo de log ou enviada para o console do administrador.</li>
                           <li>**Sistema de Loja Simples:** Desenvolva uma NUI que exibe uma lista de itens dispon√≠veis para compra. Quando o jogador clica em um item, a NUI envia a solicita√ß√£o para o `client.lua`, que a encaminha para o `server.lua` para verificar dinheiro e adicionar o item ao invent√°rio.</li>
                           <li>**Painel de Administra√ß√£o B√°sico:** Crie uma NUI com um painel simples que permite a um administrador (valide no servidor!) realizar a√ß√µes como banir jogadores (por ID), dar itens ou teleportar jogadores para coordenadas espec√≠ficas.</li>
                        </ul>
                    </article>

                    <article id="s9_3" class="mb-8 scroll-mt-24">
                        <h3 class="text-2xl font-bold mb-4 text-blue-700">9.3 Como se Tornar um Desenvolvedor de Scripts para FiveM: O Caminho do Especialista</h3>
                        <p class="mb-4 text-gray-600">O desenvolvimento para FiveM √© uma jornada fascinante e cheia de possibilidades! Para ir de iniciante a um verdadeiro especialista, siga estes conselhos valiosos:</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700">
                            <li><strong>Pratique, Pratique, Pratique!</strong> A programa√ß√£o √© como um esporte: quanto mais voc√™ joga, melhor voc√™ fica. N√£o tenha medo de errar, pois cada erro √© uma oportunidade de aprendizado. Crie pequenos projetos, teste suas ideias e explore diferentes funcionalidades.</li>
                            <li><strong>Explore o Ecossistema:</strong> O mundo FiveM est√° cheio de scripts criados pela comunidade. Baixe, abra e analise o c√≥digo de outros desenvolvedores, especialmente aqueles que s√£o de c√≥digo aberto no GitHub. Veja como eles organizam as coisas, como resolvem problemas e como implementam funcionalidades. Isso vai expandir sua vis√£o e te dar novas ideias.</li>
                            <li><strong>Seja Ativo na Comunidade:</strong> F√≥runs e servidores Discord s√£o tesouros de conhecimento. Participe, fa√ßa perguntas (n√£o existe pergunta boba!), ajude quem est√° come√ßando e compartilhe suas descobertas. A comunidade √© seu maior recurso de apoio.</li>
                            <li><strong>Aprofunde-se nas Tecnologias Base:</strong>
                                <ul class="list-circle list-inside ml-4">
                                    <li><strong>Lua:</strong> √â uma linguagem simples, mas poderosa. Entenda como funcionam as tabelas, fun√ß√µes, e como otimizar seu c√≥digo Lua para que ele seja r√°pido e n√£o cause lag no servidor.</li>
                                    <li><strong>JavaScript Moderno:</strong> O JavaScript est√° sempre evoluindo. Mantenha-se atualizado com as novas funcionalidades (como `async/await`, desestrutura√ß√£o) para escrever c√≥digo mais limpo e eficiente no seu front-end NUI.</li>
                                    <li><strong>HTML/CSS Avan√ßado:</strong> Aprenda sobre HTML sem√¢ntico (usar as tags certas para o que elas representam), acessibilidade (fazer sua interface ser us√°vel por todos) e t√©cnicas avan√ßadas de CSS (Grid, Flexbox, anima√ß√µes complexas) para criar interfaces ainda mais responsivas e bonitas.</li>
                                    <li><strong>Frameworks JavaScript (Passo Opcional, mas Poderoso):</strong> Para interfaces NUI muito grandes e com muitas intera√ß√µes, frameworks como **React**, **Vue.js** ou **Svelte** s√£o um divisor de √°guas. Eles simplificam o gerenciamento de estado e a constru√ß√£o de componentes. Come√ßar com eles depois de dominar o JavaScript puro pode ser muito gratificante.</li>
                                    <li><strong>Bancos de Dados:</strong> Para guardar informa√ß√µes de jogadores (invent√°rio, dinheiro, casas) de forma permanente, voc√™ precisar√° de um banco de dados. O conhecimento de SQL (especialmente MySQL) ou NoSQL (como MongoDB) √© fundamental para scripts mais complexos.</li>
                                </ul>
                            </li>
                            <li><strong>Foco em Otimiza√ß√£o e Seguran√ßa:</strong> Sempre que criar algo, pense em como ele pode ser o mais eficiente poss√≠vel (para evitar lag) e o mais seguro poss√≠vel (para evitar que trapaceiros explorem seu script). Essas s√£o duas qualidades de um desenvolvedor profissional.</li>
                        </ul>
                        <p class="mt-4 text-gray-600">Com dedica√ß√£o e paix√£o, voc√™ estar√° no caminho certo para se especializar em desenvolvimento de recursos customizados para servidores de FiveM e criar experi√™ncias de jogo verdadeiramente inovadoras e imersivas!</p>
                    </article>
                </section>

            </div>
        </main>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const apiKey = ""; // Sua chave de API do Google Gemini vai aqui!
        // IMPORTANTE: Nunca compartilhe esta chave em reposit√≥rios p√∫blicos.
        // Se voc√™ est√° usando localmente, pode colar a chave aqui.
        // Em um ambiente de produ√ß√£o real, use vari√°veis de ambiente.
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

        // --- Code Block Copy Functionality ---
        const allCodeBlocks = document.querySelectorAll('.code-block');
        allCodeBlocks.forEach(block => {
            const code = block.querySelector('pre code');
            const buttonContainer = document.createElement('div');
            buttonContainer.className = 'absolute top-3 right-3 flex space-x-2';
            
            const copyButton = document.createElement('button');
            copyButton.textContent = 'Copiar';
            copyButton.className = 'bg-gray-700 hover:bg-gray-600 text-white text-sm font-semibold py-1.5 px-3 rounded-md transition-colors shadow-sm';
            
            const explainButton = document.createElement('button');
            explainButton.textContent = 'Explicar C√≥digo ‚ú®';
            explainButton.className = 'bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold py-1.5 px-3 rounded-md transition-colors shadow-sm';

            const explanationArea = block.querySelector('.explanation-area');
            const explanationContent = explanationArea.querySelector('.explanation-content');
            const explanationLoadingSpinner = explanationArea.querySelector('.loading-spinner');

            buttonContainer.appendChild(copyButton);
            buttonContainer.appendChild(explainButton);
            block.appendChild(buttonContainer);

            copyButton.addEventListener('click', () => {
                const tempTextarea = document.createElement('textarea');
                tempTextarea.value = code.innerText;
                document.body.appendChild(tempTextarea);
                tempTextarea.select();
                try {
                    document.execCommand('copy');
                    copyButton.textContent = 'Copiado!';
                    setTimeout(() => {
                        copyButton.textContent = 'Copiar';
                    }, 2000);
                } catch (err) {
                    console.error('Falha ao copiar o texto: ', err);
                    copyButton.textContent = 'Erro!';
                }
                document.body.removeChild(tempTextarea);
            });
            
            explainButton.addEventListener('click', async () => {
                if (apiKey === "") {
                    explanationArea.classList.remove('hidden');
                    explanationContent.innerHTML = '<span class="text-red-600">Erro: Chave de API Gemini n√£o configurada. Por favor, insira sua chave no `script.js` para usar este recurso.</span>';
                    explanationLoadingSpinner.classList.add('hidden');
                    return;
                }

                explanationArea.classList.remove('hidden');
                explanationContent.innerHTML = '';
                explanationLoadingSpinner.classList.remove('hidden');

                const codeText = code.innerText;
                const codeLanguage = code.className.replace('language-', '');
                const prompt = `Explique o seguinte c√≥digo ${codeLanguage} detalhadamente, descrevendo sua fun√ß√£o, as vari√°veis e fun√ß√µes utilizadas, e o fluxo l√≥gico. Mantenha a explica√ß√£o focada em um desenvolvedor iniciante em FiveM. C√≥digo:\n\n\`\`\`${codeLanguage}\n${codeText}\n\`\`\``;
                
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        explanationContent.innerHTML = text.replace(/\n/g, '<br>');
                    } else {
                        explanationContent.textContent = 'N√£o foi poss√≠vel obter uma explica√ß√£o.';
                    }
                } catch (error) {
                    console.error('Erro ao chamar a API Gemini:', error);
                    explanationContent.textContent = 'Erro ao se comunicar com a API Gemini. Verifique a chave de API e a conex√£o. (Detalhes no console do navegador)';
                } finally {
                    explanationLoadingSpinner.classList.add('hidden');
                }
            });
        });

        // --- Interactive Flow Diagram ---
        const flowItems = document.querySelectorAll('.flow-item, .flow-arrow');
        const infoBox = document.getElementById('flow-info-box');
        const defaultInfoText = infoBox.textContent;

        flowItems.forEach(item => {
            item.addEventListener('mouseenter', () => {
                infoBox.textContent = item.dataset.info;
            });
            item.addEventListener('mouseleave', () => {
                infoBox.textContent = defaultInfoText;
            });
        });

        // --- Sidebar & Navigation Generation ---
        const sections = document.querySelectorAll('main section');
        const navContainer = document.getElementById('desktop-nav');
        const mobileNavContainer = document.createElement('div');
        mobileNavContainer.id = 'mobile-nav';
        mobileNavContainer.className = 'fixed inset-0 bg-white z-30 p-8 overflow-y-auto transform -translate-x-full transition-transform duration-300 ease-in-out shadow-2xl';
        
        let navHTML = '';
        sections.forEach(section => {
            const mainTitle = section.querySelector('h2').innerText;
            // Remove the leading "X." from the title for cleaner sidebar display
            const cleanMainTitle = mainTitle.replace(/^\d+\.\s/, ''); 
            navHTML += `<a href="#${section.id}" class="sidebar-link block font-semibold text-gray-700 hover:text-blue-600 py-2 rounded-md transition-colors duration-150">${cleanMainTitle}</a>`;
            const articles = section.querySelectorAll('article');
            if(articles.length > 0){
                navHTML += '<div class="pl-4 border-l-2 border-gray-200 ml-1">';
                articles.forEach(article => {
                    const subTitle = article.querySelector('h3').innerText;
                    // Remove the leading "X.X " from the subtitle
                    const cleanSubTitle = subTitle.replace(/^\d+\.\d+\s/, ''); 
                    navHTML += `<a href="#${article.id}" class="sidebar-link block text-sm text-gray-500 hover:text-blue-500 py-1.5 border-l-2 border-transparent pl-3">${cleanSubTitle}</a>`;
                });
                navHTML += '</div>';
            }
        });
        
        navContainer.innerHTML = navHTML;
        mobileNavContainer.innerHTML = `<h2 class="text-2xl font-bold mb-6 text-blue-700">√çndice</h2>${navHTML}`;
        document.body.appendChild(mobileNavContainer);

        const allNavLinks = document.querySelectorAll('.sidebar-link');

        // --- Mobile Menu Toggle ---
        const mobileMenuButton = document.getElementById('mobileMenuButton');
        mobileMenuButton.addEventListener('click', (e) => {
            e.stopPropagation();
            mobileNavContainer.classList.toggle('-translate-x-full');
            document.body.classList.toggle('overflow-hidden'); // Prevent scrolling body when menu is open
        });
        document.addEventListener('click', (e) => {
             if (!mobileNavContainer.contains(e.target) && !mobileMenuButton.contains(e.target)) {
                mobileNavContainer.classList.add('-translate-x-full');
                document.body.classList.remove('overflow-hidden');
             }
        });

        // Close mobile menu on link click
        mobileNavContainer.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                mobileNavContainer.classList.add('-translate-x-full');
                document.body.classList.remove('overflow-hidden');
            });
        });

        // --- Active Link Highlighting on Scroll ---
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    allNavLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href').substring(1) === entry.target.id) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, { rootMargin: "-30% 0px -60% 0px", threshold: 0 }); // Adjusted rootMargin for better highlight behavior

        document.querySelectorAll('section, article').forEach(el => {
            observer.observe(el);
        });

        // --- Challenge Hint Functionality ---
        const challengeSelect = document.getElementById('challenge-select');
        const getHintButton = document.getElementById('get-hint-button');
        const hintArea = document.getElementById('hint-area');
        const hintContent = hintArea.querySelector('.hint-content');
        const hintLoadingSpinner = hintArea.querySelector('.loading-spinner');

        getHintButton.addEventListener('click', async () => {
            const selectedChallenge = challengeSelect.value;
            if (!selectedChallenge) {
                hintContent.textContent = 'Por favor, selecione um desafio primeiro.';
                hintArea.classList.remove('hidden');
                return;
            }

            if (apiKey === "") {
                hintArea.classList.remove('hidden');
                hintContent.innerHTML = '<span class="text-red-600">Erro: Chave de API Gemini n√£o configurada. Por favor, insira sua chave no `script.js` para usar este recurso.</span>';
                hintLoadingSpinner.classList.add('hidden');
                return;
            }

            hintArea.classList.remove('hidden');
            hintContent.innerHTML = '';
            hintLoadingSpinner.classList.remove('hidden');

            const prompt = `Me d√™ uma dica concisa para o seguinte desafio de desenvolvimento FiveM com NUI e QBcore, focando nos primeiros passos ou em um conceito chave para iniciantes, sem dar a solu√ß√£o completa. Desafio: "${selectedChallenge}"`;
            
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    hintContent.innerHTML = text.replace(/\n/g, '<br>');
                } else {
                    hintContent.textContent = 'N√£o foi poss√≠vel obter uma dica.';
                }
            } catch (error) {
                console.error('Erro ao chamar a API Gemini para dica:', error);
                hintContent.textContent = 'Erro ao se comunicar com a API Gemini. Verifique a chave de API e a conex√£o. (Detalhes no console do navegador)';
            } finally {
                hintLoadingSpinner.classList.add('hidden');
            }
        });
    });
</script>

</body>
</html>
